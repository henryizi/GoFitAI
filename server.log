
> gofitai@1.0.0 start
> node server/index.js

--- SERVER RESTARTED ---
--- Code version: 4.0.2 - Gemini-Only-Clean: AI generation with mathematical fallback ---
[VISION SERVICE] Initializing Gemini Vision Service
[AI SERVICE] Initializing Gemini Text Service with API key rotation
[GEMINI TEXT] Using key with best quota availability
[GEMINI TEXT] Primary model: gemini-2.5-flash
[GEMINI TEXT] Fallback chain: gemini-2.5-flash â†’ gemini-2.0-flash-001 â†’ gemini-flash-latest
[GEMINI TEXT] Service initialized with model: gemini-2.5-flash
[GEMINI TEXT] API Key rotation enabled: âœ… Yes
[WORKOUT SERVICE] Initializing Gemini Workout Service
=== AI CONFIGURATION ===
Available AI Providers: [ 'gemini', 'fallback' ]
GEMINI_API_KEY exists: true
GEMINI_MODEL: gemini-2.5-flash
Using model URL: https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent
Gemini provider config: {
  name: 'gemini',
  apiKey: 'AIzaSyA4MvRwO2jzzyXC9s14GltLzpGH-A7RpRg',
  apiUrl: 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent',
  model: 'gemini-2.5-flash',
  enabled: true
}
Default AI_PROVIDER: gemini
Total providers available: 2
- gemini: ENABLED (gemini-2.5-flash)
- fallback: ENABLED (rule-based)
========================
[SERVER] Timeout configuration:
  - Request timeout: 600s
  - Keep-alive timeout: 610s
  - Headers timeout: 620s
GoFitAI Server v2.0 running on port 4000
Local IP: 192.168.0.102
Server URL: http://192.168.0.102:4000
Test API with: curl http://192.168.0.102:4000/api/test
[EXPRESS] 404 - Route not found: POST /api/generate-ai-workout
{"level":30,"time":1761190337253,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":1,"method":"POST","url":"/api/generate-ai-workout","query":{},"params":{},"headers":{"host":"localhost:4000","user-agent":"curl/8.7.1","accept":"*/*","content-type":"application/json","content-length":"345"},"remoteAddress":"127.0.0.1","remotePort":62031},"res":{"statusCode":404,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"96","etag":"W/\"60-0gddKf3oRybzFy+8vpCRCz5llLI\""}},"responseTime":6,"msg":"request completed"}
[2025-10-23T03:32:31.484Z] Test endpoint called
{"level":30,"time":1761190351485,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":2,"method":"GET","url":"/api/test","query":{},"params":{},"headers":{"host":"localhost:4000","user-agent":"curl/8.7.1","accept":"*/*"},"remoteAddress":"127.0.0.1","remotePort":62044},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"283","etag":"W/\"11b-5mI4oxQx1WtCjM8m+lR5e/55u24\""}},"responseTime":1,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
{"level":30,"time":1761190428219,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":3,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"host":"localhost:4000","user-agent":"curl/8.7.1","accept":"*/*","content-type":"application/json","content-length":"345"},"remoteAddress":"127.0.0.1","remotePort":62140},"res":{"statusCode":400,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"48","etag":"W/\"30-2IPWqIeTZ4K8TE03urMQ9ViGvTY\""}},"responseTime":0,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
{"level":30,"time":1761190475769,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":4,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"host":"localhost:4000","user-agent":"curl/8.7.1","accept":"*/*","content-type":"application/json","content-length":"345"},"remoteAddress":"127.0.0.1","remotePort":62228},"res":{"statusCode":400,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"48","etag":"W/\"30-2IPWqIeTZ4K8TE03urMQ9ViGvTY\""}},"responseTime":0,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'John Doe',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '4_5',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6524 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 5 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 5 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6524
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 9664
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "John Doe's Muscle Gain 5-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Compound movement for overall chest development. Focus on controlled eccentric and powerful concentric. Aim for progressive overload."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Targets the upper chest. Ensure a good stretch at the bottom and squeeze at the top. Keep dumbbells stable."
        },
        {
          "name": "Machine Chest Fly",
          "sets": 3,
          "reps": "10-15",
          "rest": "90s",
          "notes": "Isolation movement to maximize pec contraction. Focus on mind-muscle connection, bringing elbows together."
        },
       
[GEMINI TEXT] Workout plan generated in 43485ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "John Doe's Muscle Gain 5-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Compound movement for overall chest development. Focus on controlled eccentric and powerful concentric. Aim for progressive overload."
        },
        {
          "name": "Incline D
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 9664
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "John Doe's Muscle Gain 5-Day Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Chest & Triceps", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Compound movement for overall chest development. Focus on controlled eccentric and powerful concentric. Aim for progressive overload." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "8-12", "rest": "90-120s", "notes": "Targets the upper chest. Ensure a good...
[GEMINI TEXT] Characters around position 334: ful concentric. Aim for progre
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "John Doe's Muscle Gain 5-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Be...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: John Doe's Muscle Gain 5-Day Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: John Doe's Muscle Gain 5-Day Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 5
[WORKOUT] ğŸ” Raw plan days: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 7 },
  {
    day: 'Wednesday',
    focus: 'Legs (Quads, Hamstrings, Glutes) & Calves',
    exerciseCount: 7
  },
  { day: 'Thursday', focus: 'Shoulders & Traps', exerciseCount: 7 },
  {
    day: 'Friday',
    focus: 'Deadlift & Upper Body Accessory',
    exerciseCount: 6
  }
]
[AI WORKOUT] Debug: workoutFrequency=4_5, expectedDays=5, actualDays=5
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 5
[AI WORKOUT] - Days with exercises: 5
[AI WORKOUT] - Day 1 (Chest & Triceps): 7 exercises
[AI WORKOUT] - Day 2 (Back & Biceps): 7 exercises
[AI WORKOUT] - Day 3 (Legs (Quads, Hamstrings, Glutes) & Calves): 7 exercises
[AI WORKOUT] - Day 4 (Shoulders & Traps): 7 exercises
[AI WORKOUT] - Day 5 (Deadlift & Upper Body Accessory): 6 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 5
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Chest & Triceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Back & Biceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs (Quads, Hamstrings, Glutes) & Calves',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Shoulders & Traps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Deadlift & Upper Body Accessory',
    exerciseCount: 6,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 5
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 5
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Chest & Triceps', exerciseCount: 7 },
  { focus: 'Back & Biceps', exerciseCount: 7 },
  {
    focus: 'Legs (Quads, Hamstrings, Glutes) & Calves',
    exerciseCount: 7
  },
  { focus: 'Shoulders & Traps', exerciseCount: 7 },
  { focus: 'Deadlift & Upper Body Accessory', exerciseCount: 6 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 5
[applyWeeklyDistribution] ğŸ” workoutFrequency: 4_5
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 5
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Chest & Triceps' },
  { day: 'Tuesday', focus: 'Back & Biceps' },
  { day: 'Wednesday', focus: 'Rest Day' },
  {
    day: 'Thursday',
    focus: 'Legs (Quads, Hamstrings, Glutes) & Calves'
  },
  { day: 'Friday', focus: 'Shoulders & Traps' },
  { day: 'Saturday', focus: 'Deadlift & Upper Body Accessory' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 5 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 5 | Rest days: 2
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 7 },
  { day: 'Wednesday', focus: 'Rest Day', exerciseCount: 0 },
  {
    day: 'Thursday',
    focus: 'Legs (Quads, Hamstrings, Glutes) & Calves',
    exerciseCount: 7
  },
  { day: 'Friday', focus: 'Shoulders & Traps', exerciseCount: 7 },
  {
    day: 'Saturday',
    focus: 'Deadlift & Upper Body Accessory',
    exerciseCount: 6
  },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761190536406,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":5,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"host":"localhost:4000","user-agent":"curl/8.7.1","accept":"*/*","content-type":"application/json","content-length":"254"},"remoteAddress":"127.0.0.1","remotePort":62256},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"5329","etag":"W/\"14d1-1ryNyjHOGTEBeQoAD1nYVfQ+mes\""}},"responseTime":43490,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Jane Smith',
  level: 'beginner',
  goal: 'fat_loss',
  frequency: '3_4',
  age: 25,
  gender: 'F'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6494 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 5 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 5 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6494
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 10005
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Jane Smith's fat loss 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Lower Body (Quads & Glutes Focus)",
      "exercises": [
        {
          "name": "Barbell Back Squat",
          "sets": 4,
          "reps": "12-15",
          "rest": "60-90s",
          "notes": "Focus on maintaining an upright torso and driving through the heels. Control the eccentric phase."
        },
        {
          "name": "Leg Press",
          "sets": 3,
          "reps": "12-15",
          "rest": "60-90s",
          "notes": "Keep feet shoulder-width apart, lower until knees are close to chest without rounding lower back. Control the movement."
        },
        {
          "name": "Dumbbell Walking Lunges",
          "sets": 3,
          "reps": "10-12 per leg",
          "rest": "60-90s",
          "notes": "Maintain balance, step forward and lower until both knees are at 90 degrees. Keep front knee behind toes."
        },
        {
 
[GEMINI TEXT] Workout plan generated in 30908ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Jane Smith's fat loss 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Lower Body (Quads & Glutes Focus)",
      "exercises": [
        {
          "name": "Barbell Back Squat",
          "sets": 4,
          "reps": "12-15",
          "rest": "60-90s",
          "notes": "Focus on maintaining an upright torso and driving through the heels. Control the eccentric phase."
        },
        {
          "name": "Leg Press",
          "sets"
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 10005
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Jane Smith's fat loss 5 days Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Lower Body (Quads & Glutes Focus)", "exercises": [ { "name": "Barbell Back Squat", "sets": 4, "reps": "12-15", "rest": "60-90s", "notes": "Focus on maintaining an upright torso and driving through the heels. Control the eccentric phase." }, { "name": "Leg Press", "sets": 3, "reps": "12-15", "rest": "60-90s", "notes": "Keep feet shoulder-width apart, lower until knees are close to chest w...
[GEMINI TEXT] Characters around position 334: ntrol the eccentric phase." },
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Jane Smith's fat loss 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Lower Body (Quads & Glutes Focus)",
      "exercises": [
        {
          "...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Jane Smith's fat loss 5 days Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 9,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Jane Smith's fat loss 5 days Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 5
[WORKOUT] ğŸ” Raw plan days: [
  {
    day: 'Monday',
    focus: 'Lower Body (Quads & Glutes Focus)',
    exerciseCount: 6
  },
  {
    day: 'Tuesday',
    focus: 'Upper Body (Chest, Shoulders, Triceps)',
    exerciseCount: 6
  },
  {
    day: 'Wednesday',
    focus: 'Lower Body (Hamstrings & Glutes Focus) & Core',
    exerciseCount: 7
  },
  {
    day: 'Thursday',
    focus: 'Upper Body (Back & Biceps)',
    exerciseCount: 6
  },
  {
    day: 'Friday',
    focus: 'Full Body Metabolic Circuit',
    exerciseCount: 9
  }
]
[AI WORKOUT] Debug: workoutFrequency=3_4, expectedDays=5, actualDays=5
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 5
[AI WORKOUT] - Days with exercises: 5
[AI WORKOUT] - Day 1 (Lower Body (Quads & Glutes Focus)): 6 exercises
[AI WORKOUT] - Day 2 (Upper Body (Chest, Shoulders, Triceps)): 6 exercises
[AI WORKOUT] - Day 3 (Lower Body (Hamstrings & Glutes Focus) & Core): 7 exercises
[AI WORKOUT] - Day 4 (Upper Body (Back & Biceps)): 6 exercises
[AI WORKOUT] - Day 5 (Full Body Metabolic Circuit): 9 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 5
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Lower Body (Quads & Glutes Focus)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Upper Body (Chest, Shoulders, Triceps)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Lower Body (Hamstrings & Glutes Focus) & Core',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Upper Body (Back & Biceps)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Full Body Metabolic Circuit',
    exerciseCount: 9,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 5
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 5
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Lower Body (Quads & Glutes Focus)', exerciseCount: 6 },
  { focus: 'Upper Body (Chest, Shoulders, Triceps)', exerciseCount: 6 },
  {
    focus: 'Lower Body (Hamstrings & Glutes Focus) & Core',
    exerciseCount: 7
  },
  { focus: 'Upper Body (Back & Biceps)', exerciseCount: 6 },
  { focus: 'Full Body Metabolic Circuit', exerciseCount: 9 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 5
[applyWeeklyDistribution] ğŸ” workoutFrequency: 3_4
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 5
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Lower Body (Quads & Glutes Focus)' },
  { day: 'Tuesday', focus: 'Upper Body (Chest, Shoulders, Triceps)' },
  { day: 'Wednesday', focus: 'Rest Day' },
  {
    day: 'Thursday',
    focus: 'Lower Body (Hamstrings & Glutes Focus) & Core'
  },
  { day: 'Friday', focus: 'Upper Body (Back & Biceps)' },
  { day: 'Saturday', focus: 'Full Body Metabolic Circuit' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 5 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 5 | Rest days: 2
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  {
    day: 'Monday',
    focus: 'Lower Body (Quads & Glutes Focus)',
    exerciseCount: 6
  },
  {
    day: 'Tuesday',
    focus: 'Upper Body (Chest, Shoulders, Triceps)',
    exerciseCount: 6
  },
  { day: 'Wednesday', focus: 'Rest Day', exerciseCount: 0 },
  {
    day: 'Thursday',
    focus: 'Lower Body (Hamstrings & Glutes Focus) & Core',
    exerciseCount: 7
  },
  {
    day: 'Friday',
    focus: 'Upper Body (Back & Biceps)',
    exerciseCount: 6
  },
  {
    day: 'Saturday',
    focus: 'Full Body Metabolic Circuit',
    exerciseCount: 9
  },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761190698433,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":6,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"host":"localhost:4000","user-agent":"curl/8.7.1","accept":"*/*","content-type":"application/json","content-length":"249"},"remoteAddress":"127.0.0.1","remotePort":62388},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"5725","etag":"W/\"165d-m6fmvMXMurIQLJNyqaNsF1FzM9U\""}},"responseTime":30911,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Advanced Athlete',
  level: 'advanced',
  goal: 'strength',
  frequency: '5_6',
  age: 35,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6460 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 5 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 5 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6460
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 7791
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Advanced Athlete's strength 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "8-12",
          "rest": "90s",
          "notes": "Focus on controlled eccentric and powerful concentric. Keep elbows tucked slightly."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90s",
          "notes": "Emphasize upper chest activation. Control the dumbbells throughout the movement."
        },
        {
          "name": "Machine Chest Fly",
          "sets": 3,
          "reps": "10-15",
          "rest": "90s",
          "notes": "Squeeze the chest at the peak contraction. Maintain a slight bend in the elbows."
        },
        {
          "name": "Dumbbell Pullover",
          "sets": 3,
          "reps": "10-12",
          "rest
[GEMINI TEXT] Workout plan generated in 20694ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Advanced Athlete's strength 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "8-12",
          "rest": "90s",
          "notes": "Focus on controlled eccentric and powerful concentric. Keep elbows tucked slightly."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 7791
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Advanced Athlete's strength 5 days Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Chest & Triceps", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "8-12", "rest": "90s", "notes": "Focus on controlled eccentric and powerful concentric. Keep elbows tucked slightly." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "8-12", "rest": "90s", "notes": "Emphasize upper chest activation. Control the dumbbells throughout the movement." }, { "na...
[GEMINI TEXT] Characters around position 334: , { "name": "Incline Dumbbell 
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Advanced Athlete's strength 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barb...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Advanced Athlete's strength 5 days Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Advanced Athlete's strength 5 days Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 5
[WORKOUT] ğŸ” Raw plan days: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 6 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 6 },
  { day: 'Wednesday', focus: 'Legs & Core', exerciseCount: 7 },
  { day: 'Thursday', focus: 'Shoulders & Traps', exerciseCount: 6 },
  {
    day: 'Friday',
    focus: 'Upper Body Strength & Conditioning',
    exerciseCount: 6
  }
]
[AI WORKOUT] Debug: workoutFrequency=5_6, expectedDays=5, actualDays=5
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 5
[AI WORKOUT] - Days with exercises: 5
[AI WORKOUT] - Day 1 (Chest & Triceps): 6 exercises
[AI WORKOUT] - Day 2 (Back & Biceps): 6 exercises
[AI WORKOUT] - Day 3 (Legs & Core): 7 exercises
[AI WORKOUT] - Day 4 (Shoulders & Traps): 6 exercises
[AI WORKOUT] - Day 5 (Upper Body Strength & Conditioning): 6 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 5
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Chest & Triceps',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Back & Biceps',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs & Core',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Shoulders & Traps',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Upper Body Strength & Conditioning',
    exerciseCount: 6,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 5
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 5
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Chest & Triceps', exerciseCount: 6 },
  { focus: 'Back & Biceps', exerciseCount: 6 },
  { focus: 'Legs & Core', exerciseCount: 7 },
  { focus: 'Shoulders & Traps', exerciseCount: 6 },
  { focus: 'Upper Body Strength & Conditioning', exerciseCount: 6 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 5
[applyWeeklyDistribution] ğŸ” workoutFrequency: 5_6
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 5
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Chest & Triceps' },
  { day: 'Tuesday', focus: 'Back & Biceps' },
  { day: 'Wednesday', focus: 'Rest Day' },
  { day: 'Thursday', focus: 'Legs & Core' },
  { day: 'Friday', focus: 'Shoulders & Traps' },
  { day: 'Saturday', focus: 'Upper Body Strength & Conditioning' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 5 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 5 | Rest days: 2
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 6 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 6 },
  { day: 'Wednesday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Thursday', focus: 'Legs & Core', exerciseCount: 7 },
  { day: 'Friday', focus: 'Shoulders & Traps', exerciseCount: 6 },
  {
    day: 'Saturday',
    focus: 'Upper Body Strength & Conditioning',
    exerciseCount: 6
  },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761190762830,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":7,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"host":"localhost:4000","user-agent":"curl/8.7.1","accept":"*/*","content-type":"application/json","content-length":"255"},"remoteAddress":"127.0.0.1","remotePort":62448},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"4888","etag":"W/\"1318-cetciPA+utNT+bquCAk5dyyMDfk\""}},"responseTime":20697,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '4_5',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6526 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 5 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 5 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6526
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 10708
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-12",
          "rest": "90-120s",
          "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "6-12",
          "rest": "90-120s",
          "notes": "Targets the upper chest. Maintain a slight arch in the lower back and keep shoulder blades retracted."
        },
        {
          "name": "Dumbbell Flyes",
          "sets": 3,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Isolation for chest stretch and contraction. Keep a slight bend in the elbows and focus on squeezing the chest at the top."
        },
        
[GEMINI TEXT] Workout plan generated in 43311ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-12",
          "rest": "90-120s",
          "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell Pre
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 10708
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User's muscle gain 5 days Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Chest & Triceps", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-12", "rest": "90-120s", "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Ensure full range of motion." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "6-12", "rest": "90-120s", "notes": "Targets the upper chest. Maintain a slight arch i...
[GEMINI TEXT] Characters around position 334: tric. Ensure full range of mot
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell ...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User's muscle gain 5 days Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 8,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 8,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 8,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 8,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User's muscle gain 5 days Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 5
[WORKOUT] ğŸ” Raw plan days: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 8 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 8 },
  { day: 'Wednesday', focus: 'Legs & Glutes', exerciseCount: 7 },
  { day: 'Thursday', focus: 'Shoulders & Traps', exerciseCount: 8 },
  { day: 'Friday', focus: 'Arms & Calves', exerciseCount: 8 }
]
[AI WORKOUT] Debug: workoutFrequency=4_5, expectedDays=5, actualDays=5
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 5
[AI WORKOUT] - Days with exercises: 5
[AI WORKOUT] - Day 1 (Chest & Triceps): 8 exercises
[AI WORKOUT] - Day 2 (Back & Biceps): 8 exercises
[AI WORKOUT] - Day 3 (Legs & Glutes): 7 exercises
[AI WORKOUT] - Day 4 (Shoulders & Traps): 8 exercises
[AI WORKOUT] - Day 5 (Arms & Calves): 8 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 5
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Chest & Triceps',
    exerciseCount: 8,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Back & Biceps',
    exerciseCount: 8,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs & Glutes',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Shoulders & Traps',
    exerciseCount: 8,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Arms & Calves',
    exerciseCount: 8,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 5
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 5
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Chest & Triceps', exerciseCount: 8 },
  { focus: 'Back & Biceps', exerciseCount: 8 },
  { focus: 'Legs & Glutes', exerciseCount: 7 },
  { focus: 'Shoulders & Traps', exerciseCount: 8 },
  { focus: 'Arms & Calves', exerciseCount: 8 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 5
[applyWeeklyDistribution] ğŸ” workoutFrequency: 4_5
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 5
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Chest & Triceps' },
  { day: 'Tuesday', focus: 'Back & Biceps' },
  { day: 'Wednesday', focus: 'Rest Day' },
  { day: 'Thursday', focus: 'Legs & Glutes' },
  { day: 'Friday', focus: 'Shoulders & Traps' },
  { day: 'Saturday', focus: 'Arms & Calves' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 5 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 5 | Rest days: 2
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 8 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 8 },
  { day: 'Wednesday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Thursday', focus: 'Legs & Glutes', exerciseCount: 7 },
  { day: 'Friday', focus: 'Shoulders & Traps', exerciseCount: 8 },
  { day: 'Saturday', focus: 'Arms & Calves', exerciseCount: 8 },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761190835416,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":8,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"host":"localhost:4000","user-agent":"curl/8.7.1","accept":"*/*","content-type":"application/json","content-length":"255"},"remoteAddress":"127.0.0.1","remotePort":62493},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"5778","etag":"W/\"1692-x9ao/58ZeNUmtKhjjwlH/LTyFxo\""}},"responseTime":43313,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '2_3',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6494 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 3 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 3 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6494
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 6552
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User's muscle gain 3 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 5,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Aim for progressive overload by increasing weight or reps over time, maintaining strict form."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 4,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Targets the upper chest. Ensure a full range of motion, squeezing at the top. Maintain strict form to isolate the chest, avoiding excessive shoulder involvement."
        },
        {
          "name": "Dumbbell Flyes",
          "sets": 3,
          "reps": "10-12",
          "rest": "90s",
          "notes": "Isol
[GEMINI TEXT] Workout plan generated in 58769ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User's muscle gain 3 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 5,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Aim for progressive overload by increasing weight or reps over time, main
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 6552
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User's muscle gain 3 days Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Push (Chest, Shoulders, Triceps)", "exercises": [ { "name": "Barbell Bench Press", "sets": 5, "reps": "6-10", "rest": "90-120s", "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Aim for progressive overload by increasing weight or reps over time, maintaining strict form." }, { "name": "Incline Dumbbell Press", "sets": 4, "reps": "8-1...
[GEMINI TEXT] Characters around position 334: d powerful concentric. Aim for
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User's muscle gain 3 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
          ...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User's muscle gain 3 days Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User's muscle gain 3 days Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 3
[WORKOUT] ğŸ” Raw plan days: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 7
  },
  { day: 'Wednesday', focus: 'Pull (Back & Biceps)', exerciseCount: 6 },
  {
    day: 'Friday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  }
]
[AI WORKOUT] Debug: workoutFrequency=2_3, expectedDays=3, actualDays=3
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 3
[AI WORKOUT] - Days with exercises: 3
[AI WORKOUT] - Day 1 (Push (Chest, Shoulders, Triceps)): 7 exercises
[AI WORKOUT] - Day 2 (Pull (Back & Biceps)): 6 exercises
[AI WORKOUT] - Day 3 (Legs (Quads, Hamstrings, Glutes, Calves)): 6 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 3
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Pull (Back & Biceps)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 3
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 3
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Push (Chest, Shoulders, Triceps)', exerciseCount: 7 },
  { focus: 'Pull (Back & Biceps)', exerciseCount: 6 },
  {
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 3
[applyWeeklyDistribution] ğŸ” workoutFrequency: 2_3
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 3
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Push (Chest, Shoulders, Triceps)' },
  { day: 'Tuesday', focus: 'Rest Day' },
  { day: 'Wednesday', focus: 'Pull (Back & Biceps)' },
  { day: 'Thursday', focus: 'Rest Day' },
  { day: 'Friday', focus: 'Legs (Quads, Hamstrings, Glutes, Calves)' },
  { day: 'Saturday', focus: 'Rest Day' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 3 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 3 | Rest days: 4
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 7
  },
  { day: 'Tuesday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Wednesday', focus: 'Pull (Back & Biceps)', exerciseCount: 6 },
  { day: 'Thursday', focus: 'Rest Day', exerciseCount: 0 },
  {
    day: 'Friday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  },
  { day: 'Saturday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761190988083,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":9,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"host":"localhost:4000","user-agent":"curl/8.7.1","accept":"*/*","content-type":"application/json","content-length":"277"},"remoteAddress":"127.0.0.1","remotePort":62611},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"3671","etag":"W/\"e57-9EUp9/ORzHXvbYz3AKHBxhNPIz8\""}},"responseTime":58772,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '3_4',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6526 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 5 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 5 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6526
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 9437
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User's Muscle Gain 5-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Target upper chest. Maintain a slight arch in the back and drive through the chest."
        },
        {
          "name": "Pec Deck Fly",
          "sets": 3,
          "reps": "10-15",
          "rest": "60-90s",
          "notes": "Isolation for chest squeeze. Focus on mind-muscle connection and contracting the pecs at the peak."
        },
        {
          "name": "Dumbbell Pullover",
    
[GEMINI TEXT] Workout plan generated in 23673ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User's Muscle Gain 5-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell Pres
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 9437
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User's Muscle Gain 5-Day Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Chest & Triceps", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Ensure full range of motion." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "8-12", "rest": "90-120s", "notes": "Target upper chest. Maintain a slight arch in the ...
[GEMINI TEXT] Characters around position 334: ric. Ensure full range of moti
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User's Muscle Gain 5-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell B...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User's Muscle Gain 5-Day Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User's Muscle Gain 5-Day Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 5
[WORKOUT] ğŸ” Raw plan days: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 7 },
  { day: 'Wednesday', focus: 'Legs & Abs', exerciseCount: 7 },
  { day: 'Thursday', focus: 'Shoulders & Traps', exerciseCount: 7 },
  {
    day: 'Friday',
    focus: 'Upper Body Volume & Accessory',
    exerciseCount: 7
  }
]
[AI WORKOUT] Debug: workoutFrequency=3_4, expectedDays=5, actualDays=5
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 5
[AI WORKOUT] - Days with exercises: 5
[AI WORKOUT] - Day 1 (Chest & Triceps): 7 exercises
[AI WORKOUT] - Day 2 (Back & Biceps): 7 exercises
[AI WORKOUT] - Day 3 (Legs & Abs): 7 exercises
[AI WORKOUT] - Day 4 (Shoulders & Traps): 7 exercises
[AI WORKOUT] - Day 5 (Upper Body Volume & Accessory): 7 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 5
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Chest & Triceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Back & Biceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs & Abs',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Shoulders & Traps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Upper Body Volume & Accessory',
    exerciseCount: 7,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 5
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 5
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Chest & Triceps', exerciseCount: 7 },
  { focus: 'Back & Biceps', exerciseCount: 7 },
  { focus: 'Legs & Abs', exerciseCount: 7 },
  { focus: 'Shoulders & Traps', exerciseCount: 7 },
  { focus: 'Upper Body Volume & Accessory', exerciseCount: 7 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 5
[applyWeeklyDistribution] ğŸ” workoutFrequency: 3_4
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 5
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Chest & Triceps' },
  { day: 'Tuesday', focus: 'Back & Biceps' },
  { day: 'Wednesday', focus: 'Rest Day' },
  { day: 'Thursday', focus: 'Legs & Abs' },
  { day: 'Friday', focus: 'Shoulders & Traps' },
  { day: 'Saturday', focus: 'Upper Body Volume & Accessory' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 5 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 5 | Rest days: 2
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 7 },
  { day: 'Wednesday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Thursday', focus: 'Legs & Abs', exerciseCount: 7 },
  { day: 'Friday', focus: 'Shoulders & Traps', exerciseCount: 7 },
  {
    day: 'Saturday',
    focus: 'Upper Body Volume & Accessory',
    exerciseCount: 7
  },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761191011784,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":10,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"host":"localhost:4000","user-agent":"curl/8.7.1","accept":"*/*","content-type":"application/json","content-length":"277"},"remoteAddress":"127.0.0.1","remotePort":62655},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"5406","etag":"W/\"151e-jYEFEchyK54nxsscvDYCuworjR8\""}},"responseTime":23677,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '4_5',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6526 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 5 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 5 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6526
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 9385
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Target upper chest. Maintain a slight arch in the lower back and drive through the chest."
        },
        {
          "name": "Dumbbell Flyes",
          "sets": 3,
          "reps": "10-15",
          "rest": "90s",
          "notes": "Isolation for chest stretch and contraction. Keep a slight bend in the elbows, focus on squeezing the chest at the top."
        },
        {
          "name"
[GEMINI TEXT] Workout plan generated in 25746ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell Pre
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 9385
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User's muscle gain 5 days Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Chest & Triceps", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Ensure full range of motion." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "8-12", "rest": "90-120s", "notes": "Target upper chest. Maintain a slight arch in the...
[GEMINI TEXT] Characters around position 334: tric. Ensure full range of mot
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell ...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User's muscle gain 5 days Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User's muscle gain 5 days Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 5
[WORKOUT] ğŸ” Raw plan days: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 7 },
  { day: 'Wednesday', focus: 'Legs & Glutes', exerciseCount: 7 },
  { day: 'Thursday', focus: 'Shoulders & Traps', exerciseCount: 7 },
  { day: 'Friday', focus: 'Arms & Abs', exerciseCount: 7 }
]
[AI WORKOUT] Debug: workoutFrequency=4_5, expectedDays=5, actualDays=5
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 5
[AI WORKOUT] - Days with exercises: 5
[AI WORKOUT] - Day 1 (Chest & Triceps): 7 exercises
[AI WORKOUT] - Day 2 (Back & Biceps): 7 exercises
[AI WORKOUT] - Day 3 (Legs & Glutes): 7 exercises
[AI WORKOUT] - Day 4 (Shoulders & Traps): 7 exercises
[AI WORKOUT] - Day 5 (Arms & Abs): 7 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 5
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Chest & Triceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Back & Biceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs & Glutes',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Shoulders & Traps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Arms & Abs',
    exerciseCount: 7,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 5
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 5
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Chest & Triceps', exerciseCount: 7 },
  { focus: 'Back & Biceps', exerciseCount: 7 },
  { focus: 'Legs & Glutes', exerciseCount: 7 },
  { focus: 'Shoulders & Traps', exerciseCount: 7 },
  { focus: 'Arms & Abs', exerciseCount: 7 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 5
[applyWeeklyDistribution] ğŸ” workoutFrequency: 4_5
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 5
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Chest & Triceps' },
  { day: 'Tuesday', focus: 'Back & Biceps' },
  { day: 'Wednesday', focus: 'Rest Day' },
  { day: 'Thursday', focus: 'Legs & Glutes' },
  { day: 'Friday', focus: 'Shoulders & Traps' },
  { day: 'Saturday', focus: 'Arms & Abs' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 5 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 5 | Rest days: 2
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 7 },
  { day: 'Wednesday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Thursday', focus: 'Legs & Glutes', exerciseCount: 7 },
  { day: 'Friday', focus: 'Shoulders & Traps', exerciseCount: 7 },
  { day: 'Saturday', focus: 'Arms & Abs', exerciseCount: 7 },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761191037560,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":11,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"host":"localhost:4000","user-agent":"curl/8.7.1","accept":"*/*","content-type":"application/json","content-length":"277"},"remoteAddress":"127.0.0.1","remotePort":62672},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"5299","etag":"W/\"14b3-pv4xGuoKRohLbVE/R+ZwQQHziiE\""}},"responseTime":25749,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '5_6',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6526 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 5 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 5 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6526
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 9627
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User's Intermediate Muscle Gain 5-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps Hypertrophy",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Maintain a slight arch in the lower back and retract your shoulder blades."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90s",
          "notes": "Targets the upper chest. Ensure dumbbells are lowered to chest level with a slight stretch, then pressed upwards without locking out."
        },
        {
          "name": "Pec Deck Fly",
          "sets": 3,
          "reps": "10-15",
          "rest": "60-90s",
          "notes": "Isolation for chest. Focus on squeezing the pec
[GEMINI TEXT] Workout plan generated in 29897ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User's Intermediate Muscle Gain 5-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps Hypertrophy",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Maintain a slight arch in the lower back and retract your shoulder
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 9627
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User's Intermediate Muscle Gain 5-Day Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Chest & Triceps Hypertrophy", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Maintain a slight arch in the lower back and retract your shoulder blades." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "8-12", "rest": ...
[GEMINI TEXT] Characters around position 334: tric and powerful concentric. 
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User's Intermediate Muscle Gain 5-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps Hypertrophy",
      "exercises": [
        {
   ...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User's Intermediate Muscle Gain 5-Day Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User's Intermediate Muscle Gain 5-Day Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 5
[WORKOUT] ğŸ” Raw plan days: [
  {
    day: 'Monday',
    focus: 'Chest & Triceps Hypertrophy',
    exerciseCount: 6
  },
  {
    day: 'Tuesday',
    focus: 'Back & Biceps Hypertrophy',
    exerciseCount: 6
  },
  {
    day: 'Wednesday',
    focus: 'Legs & Calves Hypertrophy',
    exerciseCount: 7
  },
  {
    day: 'Thursday',
    focus: 'Shoulders & Abs Hypertrophy',
    exerciseCount: 6
  },
  {
    day: 'Friday',
    focus: 'Upper Body Strength & Hypertrophy',
    exerciseCount: 7
  }
]
[AI WORKOUT] Debug: workoutFrequency=5_6, expectedDays=5, actualDays=5
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 5
[AI WORKOUT] - Days with exercises: 5
[AI WORKOUT] - Day 1 (Chest & Triceps Hypertrophy): 6 exercises
[AI WORKOUT] - Day 2 (Back & Biceps Hypertrophy): 6 exercises
[AI WORKOUT] - Day 3 (Legs & Calves Hypertrophy): 7 exercises
[AI WORKOUT] - Day 4 (Shoulders & Abs Hypertrophy): 6 exercises
[AI WORKOUT] - Day 5 (Upper Body Strength & Hypertrophy): 7 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 5
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Chest & Triceps Hypertrophy',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Back & Biceps Hypertrophy',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs & Calves Hypertrophy',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Shoulders & Abs Hypertrophy',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Upper Body Strength & Hypertrophy',
    exerciseCount: 7,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 5
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 5
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Chest & Triceps Hypertrophy', exerciseCount: 6 },
  { focus: 'Back & Biceps Hypertrophy', exerciseCount: 6 },
  { focus: 'Legs & Calves Hypertrophy', exerciseCount: 7 },
  { focus: 'Shoulders & Abs Hypertrophy', exerciseCount: 6 },
  { focus: 'Upper Body Strength & Hypertrophy', exerciseCount: 7 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 5
[applyWeeklyDistribution] ğŸ” workoutFrequency: 5_6
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 5
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Chest & Triceps Hypertrophy' },
  { day: 'Tuesday', focus: 'Back & Biceps Hypertrophy' },
  { day: 'Wednesday', focus: 'Rest Day' },
  { day: 'Thursday', focus: 'Legs & Calves Hypertrophy' },
  { day: 'Friday', focus: 'Shoulders & Abs Hypertrophy' },
  { day: 'Saturday', focus: 'Upper Body Strength & Hypertrophy' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 5 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 5 | Rest days: 2
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  {
    day: 'Monday',
    focus: 'Chest & Triceps Hypertrophy',
    exerciseCount: 6
  },
  {
    day: 'Tuesday',
    focus: 'Back & Biceps Hypertrophy',
    exerciseCount: 6
  },
  { day: 'Wednesday', focus: 'Rest Day', exerciseCount: 0 },
  {
    day: 'Thursday',
    focus: 'Legs & Calves Hypertrophy',
    exerciseCount: 7
  },
  {
    day: 'Friday',
    focus: 'Shoulders & Abs Hypertrophy',
    exerciseCount: 6
  },
  {
    day: 'Saturday',
    focus: 'Upper Body Strength & Hypertrophy',
    exerciseCount: 7
  },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761191067486,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":12,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"host":"localhost:4000","user-agent":"curl/8.7.1","accept":"*/*","content-type":"application/json","content-length":"277"},"remoteAddress":"127.0.0.1","remotePort":62690},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"5225","etag":"W/\"1469-23dlCvbn8QH8bTmMSNZqAh9C6ro\""}},"responseTime":29900,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '6_7',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6526 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 7 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 7 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6526
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 12418
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User's muscle gain 7 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Triceps, Shoulders)",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Focus on controlled eccentric and powerful concentric. Maintain a slight arch in the lower back and keep shoulder blades retracted."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90s",
          "notes": "Target the upper chest. Control the dumbbells throughout the movement, avoiding locking out at the top to maintain tension."
        },
        {
          "name": "Pec Deck Fly",
          "sets": 3,
          "reps": "10-15",
          "rest": "60-90s",
          "notes": "Focus on a strong contraction at the peak of the movement. Squeeze the chest muscles."
        },
 
[GEMINI TEXT] Workout plan generated in 28403ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User's muscle gain 7 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Triceps, Shoulders)",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Focus on controlled eccentric and powerful concentric. Maintain a slight arch in the lower back and keep shoulder blades retracted."
        },
        {
          "
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 12418
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User's muscle gain 7 days Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Push (Chest, Triceps, Shoulders)", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Focus on controlled eccentric and powerful concentric. Maintain a slight arch in the lower back and keep shoulder blades retracted." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "8-12", "rest": "90s", "notes": "Target the upper chest. C...
[GEMINI TEXT] Characters around position 334: ght arch in the lower back and
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User's muscle gain 7 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Triceps, Shoulders)",
      "exercises": [
        {
          ...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User's muscle gain 7 days Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User's muscle gain 7 days Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 7
[WORKOUT] ğŸ” Raw plan days: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Triceps, Shoulders)',
    exerciseCount: 7
  },
  {
    day: 'Tuesday',
    focus: 'Pull (Back, Biceps, Rear Delts)',
    exerciseCount: 7
  },
  {
    day: 'Wednesday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  },
  {
    day: 'Thursday',
    focus: 'Upper Body (Strength & Hypertrophy)',
    exerciseCount: 7
  },
  {
    day: 'Friday',
    focus: 'Lower Body (Hypertrophy & Isolation)',
    exerciseCount: 6
  },
  {
    day: 'Saturday',
    focus: 'Full Body (Accessory & Conditioning)',
    exerciseCount: 6
  },
  { day: 'Sunday', focus: 'Active Recovery & Core', exerciseCount: 6 }
]
[AI WORKOUT] Debug: workoutFrequency=6_7, expectedDays=7, actualDays=7
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 7
[AI WORKOUT] - Days with exercises: 7
[AI WORKOUT] - Day 1 (Push (Chest, Triceps, Shoulders)): 7 exercises
[AI WORKOUT] - Day 2 (Pull (Back, Biceps, Rear Delts)): 7 exercises
[AI WORKOUT] - Day 3 (Legs (Quads, Hamstrings, Glutes, Calves)): 6 exercises
[AI WORKOUT] - Day 4 (Upper Body (Strength & Hypertrophy)): 7 exercises
[AI WORKOUT] - Day 5 (Lower Body (Hypertrophy & Isolation)): 6 exercises
[AI WORKOUT] - Day 6 (Full Body (Accessory & Conditioning)): 6 exercises
[AI WORKOUT] - Day 7 (Active Recovery & Core): 6 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 7
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Triceps, Shoulders)',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Pull (Back, Biceps, Rear Delts)',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Upper Body (Strength & Hypertrophy)',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Lower Body (Hypertrophy & Isolation)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Saturday',
    focus: 'Full Body (Accessory & Conditioning)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Sunday',
    focus: 'Active Recovery & Core',
    exerciseCount: 6,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 7
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 7
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Push (Chest, Triceps, Shoulders)', exerciseCount: 7 },
  { focus: 'Pull (Back, Biceps, Rear Delts)', exerciseCount: 7 },
  {
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  },
  { focus: 'Upper Body (Strength & Hypertrophy)', exerciseCount: 7 },
  { focus: 'Lower Body (Hypertrophy & Isolation)', exerciseCount: 6 },
  { focus: 'Full Body (Accessory & Conditioning)', exerciseCount: 6 },
  { focus: 'Active Recovery & Core', exerciseCount: 6 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 7
[applyWeeklyDistribution] ğŸ” workoutFrequency: 6_7
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Push (Chest, Triceps, Shoulders)' },
  { day: 'Tuesday', focus: 'Pull (Back, Biceps, Rear Delts)' },
  {
    day: 'Wednesday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)'
  },
  { day: 'Thursday', focus: 'Upper Body (Strength & Hypertrophy)' },
  { day: 'Friday', focus: 'Lower Body (Hypertrophy & Isolation)' },
  { day: 'Saturday', focus: 'Full Body (Accessory & Conditioning)' },
  { day: 'Sunday', focus: 'Active Recovery & Core' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 7 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 7 | Rest days: 0
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Triceps, Shoulders)',
    exerciseCount: 7
  },
  {
    day: 'Tuesday',
    focus: 'Pull (Back, Biceps, Rear Delts)',
    exerciseCount: 7
  },
  {
    day: 'Wednesday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  },
  {
    day: 'Thursday',
    focus: 'Upper Body (Strength & Hypertrophy)',
    exerciseCount: 7
  },
  {
    day: 'Friday',
    focus: 'Lower Body (Hypertrophy & Isolation)',
    exerciseCount: 6
  },
  {
    day: 'Saturday',
    focus: 'Full Body (Accessory & Conditioning)',
    exerciseCount: 6
  },
  { day: 'Sunday', focus: 'Active Recovery & Core', exerciseCount: 6 }
]
{"level":30,"time":1761191095919,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":13,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"host":"localhost:4000","user-agent":"curl/8.7.1","accept":"*/*","content-type":"application/json","content-length":"277"},"remoteAddress":"127.0.0.1","remotePort":62713},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"6901","etag":"W/\"1af5-ffqRDdVhyaoDeXb57+JAXOY/oCU\""}},"responseTime":28406,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Beginner User',
  level: 'beginner',
  goal: 'fat_loss',
  frequency: '2_3',
  age: 25,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6468 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 3 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 3 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6468
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 5250
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Beginner User's fat loss 3 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "12-15",
          "rest": "60-90s",
          "notes": "Compound movement for chest. Focus on controlled eccentric and full range of motion. Keep elbows slightly tucked."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "12-15",
          "rest": "60-90s",
          "notes": "Targets upper chest. Maintain a stable back and press the dumbbells up and slightly together."
        },
        {
          "name": "Superset: Seated Dumbbell Overhead Press & Dumbbell Lateral Raise",
          "sets": 3,
          "reps": "12-15 (each)",
          "rest": "60-90s (after both exercises)",
          "notes": "Perform Seated Dumbbell Overhead Press immediately followed
[GEMINI TEXT] Workout plan generated in 25211ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Beginner User's fat loss 3 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "12-15",
          "rest": "60-90s",
          "notes": "Compound movement for chest. Focus on controlled eccentric and full range of motion. Keep elbows slightly tucked."
        },
        {
          "name": "Incline D
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 5250
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Beginner User's fat loss 3 days Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Push (Chest, Shoulders, Triceps)", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "12-15", "rest": "60-90s", "notes": "Compound movement for chest. Focus on controlled eccentric and full range of motion. Keep elbows slightly tucked." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "12-15", "rest": "60-90s", "notes": "Targets upper chest. Maintain a stable...
[GEMINI TEXT] Characters around position 334: range of motion. Keep elbows s
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Beginner User's fat loss 3 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
         ...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Beginner User's fat loss 3 days Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 5,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 5,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Beginner User's fat loss 3 days Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 3
[WORKOUT] ğŸ” Raw plan days: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 5
  },
  { day: 'Wednesday', focus: 'Pull (Back, Biceps)', exerciseCount: 5 },
  {
    day: 'Friday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  }
]
[AI WORKOUT] Debug: workoutFrequency=2_3, expectedDays=3, actualDays=3
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 3
[AI WORKOUT] - Days with exercises: 3
[AI WORKOUT] - Day 1 (Push (Chest, Shoulders, Triceps)): 5 exercises
[AI WORKOUT] - Day 2 (Pull (Back, Biceps)): 5 exercises
[AI WORKOUT] - Day 3 (Legs (Quads, Hamstrings, Glutes, Calves)): 6 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 3
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 5,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Pull (Back, Biceps)',
    exerciseCount: 5,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 3
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 3
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Push (Chest, Shoulders, Triceps)', exerciseCount: 5 },
  { focus: 'Pull (Back, Biceps)', exerciseCount: 5 },
  {
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 3
[applyWeeklyDistribution] ğŸ” workoutFrequency: 2_3
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 3
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Push (Chest, Shoulders, Triceps)' },
  { day: 'Tuesday', focus: 'Rest Day' },
  { day: 'Wednesday', focus: 'Pull (Back, Biceps)' },
  { day: 'Thursday', focus: 'Rest Day' },
  { day: 'Friday', focus: 'Legs (Quads, Hamstrings, Glutes, Calves)' },
  { day: 'Saturday', focus: 'Rest Day' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 3 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 3 | Rest days: 4
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 5
  },
  { day: 'Tuesday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Wednesday', focus: 'Pull (Back, Biceps)', exerciseCount: 5 },
  { day: 'Thursday', focus: 'Rest Day', exerciseCount: 0 },
  {
    day: 'Friday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  },
  { day: 'Saturday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761191354387,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":14,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"174","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":62933},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"3652","etag":"W/\"e44-PzmDDADBr5+/K4jQf+YAfmNgBE0\""}},"responseTime":25213,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Intermediate User',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '3_4',
  age: 28,
  gender: 'F'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6542 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 5 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 5 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6542
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 8368
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Intermediate User's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Compound movement for overall chest development. Focus on controlled eccentric and full range of motion."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Targets the upper chest. Maintain a slight arch in the back and drive through the dumbbells."
        },
        {
          "name": "Pec Deck Fly",
          "sets": 3,
          "reps": "10-15",
          "rest": "60-90s",
          "notes": "Isolation for chest contraction. Focus on squeezing the pecs at the peak of the movement."
        },
        {
          "name": "Cable Crossover (High to Low)",
[GEMINI TEXT] Workout plan generated in 32223ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Intermediate User's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Compound movement for overall chest development. Focus on controlled eccentric and full range of motion."
        },
        {
          "name": "Incline Dumbbell Press",
   
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 8368
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Intermediate User's muscle gain 5 days Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Chest & Triceps", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Compound movement for overall chest development. Focus on controlled eccentric and full range of motion." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "8-12", "rest": "90-120s", "notes": "Targets the upper chest. Maintain a slight arch in the ba...
[GEMINI TEXT] Characters around position 334:  and full range of motion." },
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Intermediate User's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Intermediate User's muscle gain 5 days Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Intermediate User's muscle gain 5 days Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 5
[WORKOUT] ğŸ” Raw plan days: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 6 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 6 },
  { day: 'Wednesday', focus: 'Legs & Glutes', exerciseCount: 6 },
  { day: 'Thursday', focus: 'Shoulders & Abs', exerciseCount: 7 },
  {
    day: 'Friday',
    focus: 'Glutes & Hamstrings Focus',
    exerciseCount: 6
  }
]
[AI WORKOUT] Debug: workoutFrequency=3_4, expectedDays=5, actualDays=5
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 5
[AI WORKOUT] - Days with exercises: 5
[AI WORKOUT] - Day 1 (Chest & Triceps): 6 exercises
[AI WORKOUT] - Day 2 (Back & Biceps): 6 exercises
[AI WORKOUT] - Day 3 (Legs & Glutes): 6 exercises
[AI WORKOUT] - Day 4 (Shoulders & Abs): 7 exercises
[AI WORKOUT] - Day 5 (Glutes & Hamstrings Focus): 6 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 5
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Chest & Triceps',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Back & Biceps',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs & Glutes',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Shoulders & Abs',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Glutes & Hamstrings Focus',
    exerciseCount: 6,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 5
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 5
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Chest & Triceps', exerciseCount: 6 },
  { focus: 'Back & Biceps', exerciseCount: 6 },
  { focus: 'Legs & Glutes', exerciseCount: 6 },
  { focus: 'Shoulders & Abs', exerciseCount: 7 },
  { focus: 'Glutes & Hamstrings Focus', exerciseCount: 6 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 5
[applyWeeklyDistribution] ğŸ” workoutFrequency: 3_4
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 5
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Chest & Triceps' },
  { day: 'Tuesday', focus: 'Back & Biceps' },
  { day: 'Wednesday', focus: 'Rest Day' },
  { day: 'Thursday', focus: 'Legs & Glutes' },
  { day: 'Friday', focus: 'Shoulders & Abs' },
  { day: 'Saturday', focus: 'Glutes & Hamstrings Focus' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 5 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 5 | Rest days: 2
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 6 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 6 },
  { day: 'Wednesday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Thursday', focus: 'Legs & Glutes', exerciseCount: 6 },
  { day: 'Friday', focus: 'Shoulders & Abs', exerciseCount: 7 },
  {
    day: 'Saturday',
    focus: 'Glutes & Hamstrings Focus',
    exerciseCount: 6
  },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761191388620,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":15,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"185","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":62933},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"4994","etag":"W/\"1382-ce4VAj6bklxehmWFGF8CcswtOGg\""}},"responseTime":32226,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Advanced User',
  level: 'advanced',
  goal: 'muscle_gain',
  frequency: '5_6',
  age: 35,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6530 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 5 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 5 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6530
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 8178
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Advanced User's Muscle Gain 5-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Primary compound chest movement. Focus on controlled eccentric and powerful concentric. Aim for progressive overload."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Target upper chest. Ensure dumbbells are lowered to a deep stretch and pressed explosively."
        },
        {
          "name": "Dumbbell Flyes",
          "sets": 3,
          "reps": "10-15",
          "rest": "90s",
          "notes": "Focus on the stretch and contraction of the pecs. Keep a slight bend in the elbows."
        },
        {
          "name": "Close-Grip Barbell Bench Press"
[GEMINI TEXT] Workout plan generated in 23073ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Advanced User's Muscle Gain 5-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Primary compound chest movement. Focus on controlled eccentric and powerful concentric. Aim for progressive overload."
        },
        {
          "name": "Incline Dumbbell Pre
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 8178
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Advanced User's Muscle Gain 5-Day Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Chest & Triceps", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Primary compound chest movement. Focus on controlled eccentric and powerful concentric. Aim for progressive overload." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "8-12", "rest": "90-120s", "notes": "Target upper chest. Ensure dumbbells are lowered ...
[GEMINI TEXT] Characters around position 334: ric. Aim for progressive overl
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Advanced User's Muscle Gain 5-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbe...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Advanced User's Muscle Gain 5-Day Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 5,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Advanced User's Muscle Gain 5-Day Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 5
[WORKOUT] ğŸ” Raw plan days: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 6 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 6 },
  { day: 'Wednesday', focus: 'Legs & Glutes', exerciseCount: 6 },
  { day: 'Thursday', focus: 'Shoulders & Traps', exerciseCount: 5 },
  {
    day: 'Friday',
    focus: 'Upper Body Strength & Accessory',
    exerciseCount: 7
  }
]
[AI WORKOUT] Debug: workoutFrequency=5_6, expectedDays=5, actualDays=5
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 5
[AI WORKOUT] - Days with exercises: 5
[AI WORKOUT] - Day 1 (Chest & Triceps): 6 exercises
[AI WORKOUT] - Day 2 (Back & Biceps): 6 exercises
[AI WORKOUT] - Day 3 (Legs & Glutes): 6 exercises
[AI WORKOUT] - Day 4 (Shoulders & Traps): 5 exercises
[AI WORKOUT] - Day 5 (Upper Body Strength & Accessory): 7 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 5
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Chest & Triceps',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Back & Biceps',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs & Glutes',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Shoulders & Traps',
    exerciseCount: 5,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Upper Body Strength & Accessory',
    exerciseCount: 7,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 5
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 5
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Chest & Triceps', exerciseCount: 6 },
  { focus: 'Back & Biceps', exerciseCount: 6 },
  { focus: 'Legs & Glutes', exerciseCount: 6 },
  { focus: 'Shoulders & Traps', exerciseCount: 5 },
  { focus: 'Upper Body Strength & Accessory', exerciseCount: 7 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 5
[applyWeeklyDistribution] ğŸ” workoutFrequency: 5_6
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 5
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Chest & Triceps' },
  { day: 'Tuesday', focus: 'Back & Biceps' },
  { day: 'Wednesday', focus: 'Rest Day' },
  { day: 'Thursday', focus: 'Legs & Glutes' },
  { day: 'Friday', focus: 'Shoulders & Traps' },
  { day: 'Saturday', focus: 'Upper Body Strength & Accessory' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 5 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 5 | Rest days: 2
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 6 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 6 },
  { day: 'Wednesday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Thursday', focus: 'Legs & Glutes', exerciseCount: 6 },
  { day: 'Friday', focus: 'Shoulders & Traps', exerciseCount: 5 },
  {
    day: 'Saturday',
    focus: 'Upper Body Strength & Accessory',
    exerciseCount: 7
  },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761191413700,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":16,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"177","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":62933},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"4883","etag":"W/\"1313-pPvusEDzLUl+nw7uSVXbIMUoTCM\""}},"responseTime":23076,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Elite User',
  level: 'advanced',
  goal: 'muscle_gain',
  frequency: '6_7',
  age: 30,
  gender: 'F'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6524 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 7 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 7 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6524
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 11193
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Elite User's muscle gain 7 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Compound movement, focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Targets upper chest. Keep elbows slightly tucked to protect shoulders."
        },
        {
          "name": "Barbell Overhead Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Stand tall, brace core, press explosively overhead. Control the descent."
        },
        {
          "name": "Dumbbell Lateral Raise",
          "sets": 3,
      
[GEMINI TEXT] Workout plan generated in 30462ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Elite User's muscle gain 7 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Compound movement, focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell Pre
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 11193
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Elite User's muscle gain 7 days Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Push (Chest, Shoulders, Triceps)", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Compound movement, focus on controlled eccentric and powerful concentric. Ensure full range of motion." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "8-12", "rest": "90-120s", "notes": "Targets upper chest. Keep elbows slightly tucked ...
[GEMINI TEXT] Characters around position 334: tric. Ensure full range of mot
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Elite User's muscle gain 7 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
         ...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Elite User's muscle gain 7 days Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Elite User's muscle gain 7 days Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 7
[WORKOUT] ğŸ” Raw plan days: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6
  },
  { day: 'Tuesday', focus: 'Pull (Back, Biceps)', exerciseCount: 6 },
  { day: 'Wednesday', focus: 'Legs & Glutes', exerciseCount: 6 },
  { day: 'Thursday', focus: 'Upper Body', exerciseCount: 6 },
  { day: 'Friday', focus: 'Lower Body & Glutes', exerciseCount: 6 },
  {
    day: 'Saturday',
    focus: 'Full Body Compound Focus',
    exerciseCount: 6
  },
  { day: 'Sunday', focus: 'Active Recovery & Core', exerciseCount: 6 }
]
[AI WORKOUT] Debug: workoutFrequency=6_7, expectedDays=7, actualDays=7
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 7
[AI WORKOUT] - Days with exercises: 7
[AI WORKOUT] - Day 1 (Push (Chest, Shoulders, Triceps)): 6 exercises
[AI WORKOUT] - Day 2 (Pull (Back, Biceps)): 6 exercises
[AI WORKOUT] - Day 3 (Legs & Glutes): 6 exercises
[AI WORKOUT] - Day 4 (Upper Body): 6 exercises
[AI WORKOUT] - Day 5 (Lower Body & Glutes): 6 exercises
[AI WORKOUT] - Day 6 (Full Body Compound Focus): 6 exercises
[AI WORKOUT] - Day 7 (Active Recovery & Core): 6 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 7
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Pull (Back, Biceps)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs & Glutes',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Upper Body',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Lower Body & Glutes',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Saturday',
    focus: 'Full Body Compound Focus',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Sunday',
    focus: 'Active Recovery & Core',
    exerciseCount: 6,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 7
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 7
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Push (Chest, Shoulders, Triceps)', exerciseCount: 6 },
  { focus: 'Pull (Back, Biceps)', exerciseCount: 6 },
  { focus: 'Legs & Glutes', exerciseCount: 6 },
  { focus: 'Upper Body', exerciseCount: 6 },
  { focus: 'Lower Body & Glutes', exerciseCount: 6 },
  { focus: 'Full Body Compound Focus', exerciseCount: 6 },
  { focus: 'Active Recovery & Core', exerciseCount: 6 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 7
[applyWeeklyDistribution] ğŸ” workoutFrequency: 6_7
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Push (Chest, Shoulders, Triceps)' },
  { day: 'Tuesday', focus: 'Pull (Back, Biceps)' },
  { day: 'Wednesday', focus: 'Legs & Glutes' },
  { day: 'Thursday', focus: 'Upper Body' },
  { day: 'Friday', focus: 'Lower Body & Glutes' },
  { day: 'Saturday', focus: 'Full Body Compound Focus' },
  { day: 'Sunday', focus: 'Active Recovery & Core' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 7 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 7 | Rest days: 0
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6
  },
  { day: 'Tuesday', focus: 'Pull (Back, Biceps)', exerciseCount: 6 },
  { day: 'Wednesday', focus: 'Legs & Glutes', exerciseCount: 6 },
  { day: 'Thursday', focus: 'Upper Body', exerciseCount: 6 },
  { day: 'Friday', focus: 'Lower Body & Glutes', exerciseCount: 6 },
  {
    day: 'Saturday',
    focus: 'Full Body Compound Focus',
    exerciseCount: 6
  },
  { day: 'Sunday', focus: 'Active Recovery & Core', exerciseCount: 6 }
]
{"level":30,"time":1761191446171,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":17,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"174","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":62933},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"6473","etag":"W/\"1949-4FjnY/JcI+ZRcYsiW6vLbEiGw2c\""}},"responseTime":30466,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'John Doe',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '4_5',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6524 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 5 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 5 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6524
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 9122
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "John Doe's Intermediate Muscle Gain 5-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Focus on controlled eccentric phase and explosive concentric. Maintain a slight arch in the lower back and retract shoulder blades."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Target the upper chest. Ensure dumbbells are lowered to a comfortable stretch, maintaining tension on the pecs."
        },
        {
          "name": "Pec Deck Fly",
          "sets": 3,
          "reps": "10-15",
          "rest": "60-90s",
          "notes": "Focus on a strong contraction at the peak. Control the movement, avoid letting the weights pull your shoulders to
[GEMINI TEXT] Workout plan generated in 25289ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "John Doe's Intermediate Muscle Gain 5-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Focus on controlled eccentric phase and explosive concentric. Maintain a slight arch in the lower back and retract shoulder blades."
        },
        {
          "name":
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 9122
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "John Doe's Intermediate Muscle Gain 5-Day Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Chest & Triceps", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Focus on controlled eccentric phase and explosive concentric. Maintain a slight arch in the lower back and retract shoulder blades." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "8-12", "rest": "90-120s", "notes": "Target the upper chest. Ens...
[GEMINI TEXT] Characters around position 334: ight arch in the lower back an
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "John Doe's Intermediate Muscle Gain 5-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name"...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: John Doe's Intermediate Muscle Gain 5-Day Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: John Doe's Intermediate Muscle Gain 5-Day Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 5
[WORKOUT] ğŸ” Raw plan days: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 6 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 6 },
  { day: 'Wednesday', focus: 'Legs & Calves', exerciseCount: 6 },
  { day: 'Thursday', focus: 'Shoulders & Traps', exerciseCount: 6 },
  { day: 'Friday', focus: 'Arms & Abs', exerciseCount: 7 }
]
[AI WORKOUT] Debug: workoutFrequency=4_5, expectedDays=5, actualDays=5
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 5
[AI WORKOUT] - Days with exercises: 5
[AI WORKOUT] - Day 1 (Chest & Triceps): 6 exercises
[AI WORKOUT] - Day 2 (Back & Biceps): 6 exercises
[AI WORKOUT] - Day 3 (Legs & Calves): 6 exercises
[AI WORKOUT] - Day 4 (Shoulders & Traps): 6 exercises
[AI WORKOUT] - Day 5 (Arms & Abs): 7 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 5
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Chest & Triceps',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Back & Biceps',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs & Calves',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Shoulders & Traps',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Arms & Abs',
    exerciseCount: 7,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 5
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 5
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Chest & Triceps', exerciseCount: 6 },
  { focus: 'Back & Biceps', exerciseCount: 6 },
  { focus: 'Legs & Calves', exerciseCount: 6 },
  { focus: 'Shoulders & Traps', exerciseCount: 6 },
  { focus: 'Arms & Abs', exerciseCount: 7 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 5
[applyWeeklyDistribution] ğŸ” workoutFrequency: 4_5
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 5
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Chest & Triceps' },
  { day: 'Tuesday', focus: 'Back & Biceps' },
  { day: 'Wednesday', focus: 'Rest Day' },
  { day: 'Thursday', focus: 'Legs & Calves' },
  { day: 'Friday', focus: 'Shoulders & Traps' },
  { day: 'Saturday', focus: 'Arms & Abs' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 5 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 5 | Rest days: 2
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 6 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 6 },
  { day: 'Wednesday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Thursday', focus: 'Legs & Calves', exerciseCount: 6 },
  { day: 'Friday', focus: 'Shoulders & Traps', exerciseCount: 6 },
  { day: 'Saturday', focus: 'Arms & Abs', exerciseCount: 7 },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761191553212,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":18,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"176","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":63102},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"4946","etag":"W/\"1352-iJI/425Z22FiPL9Ksk3vaL5ZzT4\""}},"responseTime":25292,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'John Doe',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '4_5',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6524 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 5 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 5 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6524
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 9617
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "John Doe's Muscle Gain 5-Day Plan (Intermediate)",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Primary compound chest movement. Focus on controlled eccentric (lowering) and powerful concentric (lifting). Aim for progressive overload by increasing weight or reps over time."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Targets the upper chest. Control the dumbbells throughout the movement, squeezing the chest at the top. Avoid flaring elbows too wide."
        },
        {
          "name": "Barbell Overhead Press",
          "sets": 3,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Compound should
[GEMINI TEXT] Workout plan generated in 42972ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "John Doe's Muscle Gain 5-Day Plan (Intermediate)",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Primary compound chest movement. Focus on controlled eccentric (lowering) and powerful concentric (lifting). Aim for progressive overload by increasing 
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 9617
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "John Doe's Muscle Gain 5-Day Plan (Intermediate)", "weekly_schedule": [ { "day": "Monday", "focus": "Push (Chest, Shoulders, Triceps)", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Primary compound chest movement. Focus on controlled eccentric (lowering) and powerful concentric (lifting). Aim for progressive overload by increasing weight or reps over time." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps":...
[GEMINI TEXT] Characters around position 334: entric (lowering) and powerful
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "John Doe's Muscle Gain 5-Day Plan (Intermediate)",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
       ...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: John Doe's Muscle Gain 5-Day Plan (Intermediate)
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 5,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 8,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: John Doe's Muscle Gain 5-Day Plan (Intermediate)
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 5
[WORKOUT] ğŸ” Raw plan days: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6
  },
  { day: 'Tuesday', focus: 'Pull (Back & Biceps)', exerciseCount: 6 },
  {
    day: 'Wednesday',
    focus: 'Legs (Quads, Glutes & Calves)',
    exerciseCount: 5
  },
  {
    day: 'Thursday',
    focus: 'Upper Body Hypertrophy & Strength',
    exerciseCount: 8
  },
  {
    day: 'Friday',
    focus: 'Lower Body Hypertrophy & Posterior Chain',
    exerciseCount: 6
  }
]
[AI WORKOUT] Debug: workoutFrequency=4_5, expectedDays=5, actualDays=5
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 5
[AI WORKOUT] - Days with exercises: 5
[AI WORKOUT] - Day 1 (Push (Chest, Shoulders, Triceps)): 6 exercises
[AI WORKOUT] - Day 2 (Pull (Back & Biceps)): 6 exercises
[AI WORKOUT] - Day 3 (Legs (Quads, Glutes & Calves)): 5 exercises
[AI WORKOUT] - Day 4 (Upper Body Hypertrophy & Strength): 8 exercises
[AI WORKOUT] - Day 5 (Lower Body Hypertrophy & Posterior Chain): 6 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 5
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Pull (Back & Biceps)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs (Quads, Glutes & Calves)',
    exerciseCount: 5,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Upper Body Hypertrophy & Strength',
    exerciseCount: 8,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Lower Body Hypertrophy & Posterior Chain',
    exerciseCount: 6,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 5
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 5
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Push (Chest, Shoulders, Triceps)', exerciseCount: 6 },
  { focus: 'Pull (Back & Biceps)', exerciseCount: 6 },
  { focus: 'Legs (Quads, Glutes & Calves)', exerciseCount: 5 },
  { focus: 'Upper Body Hypertrophy & Strength', exerciseCount: 8 },
  {
    focus: 'Lower Body Hypertrophy & Posterior Chain',
    exerciseCount: 6
  }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 5
[applyWeeklyDistribution] ğŸ” workoutFrequency: 4_5
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 5
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Push (Chest, Shoulders, Triceps)' },
  { day: 'Tuesday', focus: 'Pull (Back & Biceps)' },
  { day: 'Wednesday', focus: 'Rest Day' },
  { day: 'Thursday', focus: 'Legs (Quads, Glutes & Calves)' },
  { day: 'Friday', focus: 'Upper Body Hypertrophy & Strength' },
  {
    day: 'Saturday',
    focus: 'Lower Body Hypertrophy & Posterior Chain'
  },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 5 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 5 | Rest days: 2
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6
  },
  { day: 'Tuesday', focus: 'Pull (Back & Biceps)', exerciseCount: 6 },
  { day: 'Wednesday', focus: 'Rest Day', exerciseCount: 0 },
  {
    day: 'Thursday',
    focus: 'Legs (Quads, Glutes & Calves)',
    exerciseCount: 5
  },
  {
    day: 'Friday',
    focus: 'Upper Body Hypertrophy & Strength',
    exerciseCount: 8
  },
  {
    day: 'Saturday',
    focus: 'Lower Body Hypertrophy & Posterior Chain',
    exerciseCount: 6
  },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761191656529,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":19,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"176","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":63188},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"5256","etag":"W/\"1488-JeCAwp7hvihSEPJAyvumznoRwTQ\""}},"responseTime":42974,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User 2_3',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '2_3',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6502 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 3 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 3 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6502
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 5128
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User 2_3's muscle gain 3 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Focus on controlled eccentric and powerful concentric. Ensure full range of motion. Aim for progressive overload."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Target the upper chest. Maintain a slight arch in the back and drive through the dumbbells."
        },
        {
          "name": "Barbell Overhead Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Stand tall, brace your core, and press the barbell directly overhead. Avoid leaning back excessively."
        },
        {
       
[GEMINI TEXT] Workout plan generated in 18263ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User 2_3's muscle gain 3 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Focus on controlled eccentric and powerful concentric. Ensure full range of motion. Aim for progressive overload."
        },
        {
          "name": "Inclin
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 5128
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User 2_3's muscle gain 3 days Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Push (Chest, Shoulders, Triceps)", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Focus on controlled eccentric and powerful concentric. Ensure full range of motion. Aim for progressive overload." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "8-12", "rest": "90-120s", "notes": "Target the upper chest. Maintain a ...
[GEMINI TEXT] Characters around position 334: l range of motion. Aim for pro
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User 2_3's muscle gain 3 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
      ...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User 2_3's muscle gain 3 days Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User 2_3's muscle gain 3 days Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 3
[WORKOUT] ğŸ” Raw plan days: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6
  },
  { day: 'Wednesday', focus: 'Pull (Back & Biceps)', exerciseCount: 6 },
  { day: 'Friday', focus: 'Legs & Core', exerciseCount: 6 }
]
[AI WORKOUT] Debug: workoutFrequency=2_3, expectedDays=3, actualDays=3
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 3
[AI WORKOUT] - Days with exercises: 3
[AI WORKOUT] - Day 1 (Push (Chest, Shoulders, Triceps)): 6 exercises
[AI WORKOUT] - Day 2 (Pull (Back & Biceps)): 6 exercises
[AI WORKOUT] - Day 3 (Legs & Core): 6 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 3
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Pull (Back & Biceps)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Legs & Core',
    exerciseCount: 6,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 3
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 3
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Push (Chest, Shoulders, Triceps)', exerciseCount: 6 },
  { focus: 'Pull (Back & Biceps)', exerciseCount: 6 },
  { focus: 'Legs & Core', exerciseCount: 6 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 3
[applyWeeklyDistribution] ğŸ” workoutFrequency: 2_3
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 3
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Push (Chest, Shoulders, Triceps)' },
  { day: 'Tuesday', focus: 'Rest Day' },
  { day: 'Wednesday', focus: 'Pull (Back & Biceps)' },
  { day: 'Thursday', focus: 'Rest Day' },
  { day: 'Friday', focus: 'Legs & Core' },
  { day: 'Saturday', focus: 'Rest Day' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 3 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 3 | Rest days: 4
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6
  },
  { day: 'Tuesday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Wednesday', focus: 'Pull (Back & Biceps)', exerciseCount: 6 },
  { day: 'Thursday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Friday', focus: 'Legs & Core', exerciseCount: 6 },
  { day: 'Saturday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761191758190,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":20,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"181","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":63301},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"3532","etag":"W/\"dcc-yCGWHED+9/a57QIRELRqiT8XeuQ\""}},"responseTime":18265,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User 3_4',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '3_4',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6534 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 5 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 5 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6534
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 9740
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User 3_4's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Aim for progressive overload."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 4,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Targets upper chest. Maintain a slight arch and squeeze at the top."
        },
        {
          "name": "Pec Deck Fly",
          "sets": 4,
          "reps": "10-15",
          "rest": "90s",
          "notes": "Isolation for chest. Focus on mind-muscle connection and a full stretch at the back."
        },
        {
          "name": "Cable Crossover (High to Low)",
          "sets": 3
[GEMINI TEXT] Workout plan generated in 33599ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User 3_4's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Aim for progressive overload."
        },
        {
          "name": "Incline Dumbbel
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 9740
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User 3_4's muscle gain 5 days Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Chest & Triceps", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Aim for progressive overload." }, { "name": "Incline Dumbbell Press", "sets": 4, "reps": "8-12", "rest": "90-120s", "notes": "Targets upper chest. Maintain a slight arch ...
[GEMINI TEXT] Characters around position 334: ncentric. Aim for progressive 
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User 3_4's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barb...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User 3_4's muscle gain 5 days Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 8,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User 3_4's muscle gain 5 days Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 5
[WORKOUT] ğŸ” Raw plan days: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 7 },
  { day: 'Wednesday', focus: 'Legs & Calves', exerciseCount: 7 },
  { day: 'Thursday', focus: 'Shoulders & Traps', exerciseCount: 7 },
  { day: 'Friday', focus: 'Arms & Abs', exerciseCount: 8 }
]
[AI WORKOUT] Debug: workoutFrequency=3_4, expectedDays=5, actualDays=5
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 5
[AI WORKOUT] - Days with exercises: 5
[AI WORKOUT] - Day 1 (Chest & Triceps): 7 exercises
[AI WORKOUT] - Day 2 (Back & Biceps): 7 exercises
[AI WORKOUT] - Day 3 (Legs & Calves): 7 exercises
[AI WORKOUT] - Day 4 (Shoulders & Traps): 7 exercises
[AI WORKOUT] - Day 5 (Arms & Abs): 8 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 5
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Chest & Triceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Back & Biceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs & Calves',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Shoulders & Traps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Arms & Abs',
    exerciseCount: 8,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 5
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 5
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Chest & Triceps', exerciseCount: 7 },
  { focus: 'Back & Biceps', exerciseCount: 7 },
  { focus: 'Legs & Calves', exerciseCount: 7 },
  { focus: 'Shoulders & Traps', exerciseCount: 7 },
  { focus: 'Arms & Abs', exerciseCount: 8 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 5
[applyWeeklyDistribution] ğŸ” workoutFrequency: 3_4
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 5
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Chest & Triceps' },
  { day: 'Tuesday', focus: 'Back & Biceps' },
  { day: 'Wednesday', focus: 'Rest Day' },
  { day: 'Thursday', focus: 'Legs & Calves' },
  { day: 'Friday', focus: 'Shoulders & Traps' },
  { day: 'Saturday', focus: 'Arms & Abs' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 5 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 5 | Rest days: 2
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 7 },
  { day: 'Wednesday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Thursday', focus: 'Legs & Calves', exerciseCount: 7 },
  { day: 'Friday', focus: 'Shoulders & Traps', exerciseCount: 7 },
  { day: 'Saturday', focus: 'Arms & Abs', exerciseCount: 8 },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761191793302,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":21,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"181","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":63301},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"5376","etag":"W/\"1500-JJZdsO/ZBrZnIA22RwoQMrr3IS4\""}},"responseTime":33604,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User 4_5',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '4_5',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6534 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 5 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 5 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6534
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 9045
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User 4_5's Intermediate Muscle Gain 5-Day Split",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Compound movement for overall chest development. Focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Targets the upper chest. Maintain a slight arch in the lower back and control the dumbbells throughout the movement."
        },
        {
          "name": "Dumbbell Flyes",
          "sets": 3,
          "reps": "10-12",
          "rest": "90s",
          "notes": "Isolation movement for chest stretch and contraction. Keep a slight bend in the elbows and squeeze the
[GEMINI TEXT] Workout plan generated in 28238ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User 4_5's Intermediate Muscle Gain 5-Day Split",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Compound movement for overall chest development. Focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 9045
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User 4_5's Intermediate Muscle Gain 5-Day Split", "weekly_schedule": [ { "day": "Monday", "focus": "Chest & Triceps", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Compound movement for overall chest development. Focus on controlled eccentric and powerful concentric. Ensure full range of motion." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "8-12", "rest": "90-120s", "notes": "Targets the upper ch...
[GEMINI TEXT] Characters around position 334: eccentric and powerful concent
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User 4_5's Intermediate Muscle Gain 5-Day Split",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          ...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User 4_5's Intermediate Muscle Gain 5-Day Split
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 5,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 8,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User 4_5's Intermediate Muscle Gain 5-Day Split
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 5
[WORKOUT] ğŸ” Raw plan days: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 6 },
  { day: 'Wednesday', focus: 'Legs & Glutes', exerciseCount: 6 },
  { day: 'Thursday', focus: 'Shoulders & Traps', exerciseCount: 5 },
  { day: 'Friday', focus: 'Arms & Abs', exerciseCount: 8 }
]
[AI WORKOUT] Debug: workoutFrequency=4_5, expectedDays=5, actualDays=5
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 5
[AI WORKOUT] - Days with exercises: 5
[AI WORKOUT] - Day 1 (Chest & Triceps): 7 exercises
[AI WORKOUT] - Day 2 (Back & Biceps): 6 exercises
[AI WORKOUT] - Day 3 (Legs & Glutes): 6 exercises
[AI WORKOUT] - Day 4 (Shoulders & Traps): 5 exercises
[AI WORKOUT] - Day 5 (Arms & Abs): 8 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 5
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Chest & Triceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Back & Biceps',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs & Glutes',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Shoulders & Traps',
    exerciseCount: 5,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Arms & Abs',
    exerciseCount: 8,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 5
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 5
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Chest & Triceps', exerciseCount: 7 },
  { focus: 'Back & Biceps', exerciseCount: 6 },
  { focus: 'Legs & Glutes', exerciseCount: 6 },
  { focus: 'Shoulders & Traps', exerciseCount: 5 },
  { focus: 'Arms & Abs', exerciseCount: 8 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 5
[applyWeeklyDistribution] ğŸ” workoutFrequency: 4_5
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 5
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Chest & Triceps' },
  { day: 'Tuesday', focus: 'Back & Biceps' },
  { day: 'Wednesday', focus: 'Rest Day' },
  { day: 'Thursday', focus: 'Legs & Glutes' },
  { day: 'Friday', focus: 'Shoulders & Traps' },
  { day: 'Saturday', focus: 'Arms & Abs' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 5 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 5 | Rest days: 2
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 6 },
  { day: 'Wednesday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Thursday', focus: 'Legs & Glutes', exerciseCount: 6 },
  { day: 'Friday', focus: 'Shoulders & Traps', exerciseCount: 5 },
  { day: 'Saturday', focus: 'Arms & Abs', exerciseCount: 8 },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761191823047,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":22,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"181","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":63301},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"5005","etag":"W/\"138d-AzpvHsj84rnUP6ymTcvmFLUUEME\""}},"responseTime":28241,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User 5_6',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '5_6',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6534 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 5 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 5 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6534
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 9465
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User 5_6's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Compound movement, focus on controlled eccentric and powerful concentric. Aim for progressive overload."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Emphasize upper chest. Control the dumbbells throughout the range of motion."
        },
        {
          "name": "Overhead Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Focus on driving the dumbbells directly overhead, engaging the deltoids. Maintain a stable core."
        },
        {
          "name": "Dumbbell Lateral 
[GEMINI TEXT] Workout plan generated in 51944ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User 5_6's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Compound movement, focus on controlled eccentric and powerful concentric. Aim for progressive overload."
        },
        {
          "name": "Incline Dumbbell
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 9465
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User 5_6's muscle gain 5 days Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Push (Chest, Shoulders, Triceps)", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Compound movement, focus on controlled eccentric and powerful concentric. Aim for progressive overload." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "8-12", "rest": "90-120s", "notes": "Emphasize upper chest. Control the dumbbells ...
[GEMINI TEXT] Characters around position 334: centric. Aim for progressive o
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User 5_6's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
      ...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User 5_6's muscle gain 5 days Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 8,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 8,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User 5_6's muscle gain 5 days Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 5
[WORKOUT] ğŸ” Raw plan days: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 7
  },
  {
    day: 'Tuesday',
    focus: 'Pull (Back, Biceps, Rear Delts)',
    exerciseCount: 7
  },
  { day: 'Wednesday', focus: 'Legs & Glutes', exerciseCount: 6 },
  {
    day: 'Thursday',
    focus: 'Upper Body (Volume & Accessory)',
    exerciseCount: 8
  },
  {
    day: 'Friday',
    focus: 'Lower Body (Volume & Accessory) & Abs',
    exerciseCount: 8
  }
]
[AI WORKOUT] Debug: workoutFrequency=5_6, expectedDays=5, actualDays=5
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 5
[AI WORKOUT] - Days with exercises: 5
[AI WORKOUT] - Day 1 (Push (Chest, Shoulders, Triceps)): 7 exercises
[AI WORKOUT] - Day 2 (Pull (Back, Biceps, Rear Delts)): 7 exercises
[AI WORKOUT] - Day 3 (Legs & Glutes): 6 exercises
[AI WORKOUT] - Day 4 (Upper Body (Volume & Accessory)): 8 exercises
[AI WORKOUT] - Day 5 (Lower Body (Volume & Accessory) & Abs): 8 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 5
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Pull (Back, Biceps, Rear Delts)',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs & Glutes',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Upper Body (Volume & Accessory)',
    exerciseCount: 8,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Lower Body (Volume & Accessory) & Abs',
    exerciseCount: 8,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 5
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 5
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Push (Chest, Shoulders, Triceps)', exerciseCount: 7 },
  { focus: 'Pull (Back, Biceps, Rear Delts)', exerciseCount: 7 },
  { focus: 'Legs & Glutes', exerciseCount: 6 },
  { focus: 'Upper Body (Volume & Accessory)', exerciseCount: 8 },
  { focus: 'Lower Body (Volume & Accessory) & Abs', exerciseCount: 8 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 5
[applyWeeklyDistribution] ğŸ” workoutFrequency: 5_6
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 5
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Push (Chest, Shoulders, Triceps)' },
  { day: 'Tuesday', focus: 'Pull (Back, Biceps, Rear Delts)' },
  { day: 'Wednesday', focus: 'Rest Day' },
  { day: 'Thursday', focus: 'Legs & Glutes' },
  { day: 'Friday', focus: 'Upper Body (Volume & Accessory)' },
  { day: 'Saturday', focus: 'Lower Body (Volume & Accessory) & Abs' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 5 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 5 | Rest days: 2
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 7
  },
  {
    day: 'Tuesday',
    focus: 'Pull (Back, Biceps, Rear Delts)',
    exerciseCount: 7
  },
  { day: 'Wednesday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Thursday', focus: 'Legs & Glutes', exerciseCount: 6 },
  {
    day: 'Friday',
    focus: 'Upper Body (Volume & Accessory)',
    exerciseCount: 8
  },
  {
    day: 'Saturday',
    focus: 'Lower Body (Volume & Accessory) & Abs',
    exerciseCount: 8
  },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761191876497,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":23,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"181","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":63301},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"5726","etag":"W/\"165e-lhgHd/BsVOi9gYM681URSokPITM\""}},"responseTime":51947,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User 6_7',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '6_7',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6534 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 7 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 7 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6534
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 12919
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User 6_7's muscle gain 7 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Compound movement for overall chest development. Focus on controlled eccentric and powerful concentric."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Targets the upper chest. Ensure a good stretch at the bottom and squeeze at the top."
        },
        {
          "name": "Cable Crossover (High to Low)",
          "sets": 3,
          "reps": "10-15",
          "rest": "60-90s",
          "notes": "Isolation for inner chest and pec definition. Focus on mind-muscle connection and a strong contraction."
        },
        {
          "name": "Dumbbell Pull
[GEMINI TEXT] Workout plan generated in 48772ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User 6_7's muscle gain 7 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Compound movement for overall chest development. Focus on controlled eccentric and powerful concentric."
        },
        {
          "name": "Incline Dumbbell Press",
        
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 12919
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User 6_7's muscle gain 7 days Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Chest & Triceps", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Compound movement for overall chest development. Focus on controlled eccentric and powerful concentric." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "8-12", "rest": "90-120s", "notes": "Targets the upper chest. Ensure a good stretch at the bottom a...
[GEMINI TEXT] Characters around position 334:  powerful concentric." }, { "n
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User 6_7's muscle gain 7 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barb...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User 6_7's muscle gain 7 days Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 8,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User 6_7's muscle gain 7 days Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 7
[WORKOUT] ğŸ” Raw plan days: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 7 },
  { day: 'Wednesday', focus: 'Legs & Abs', exerciseCount: 8 },
  { day: 'Thursday', focus: 'Shoulders & Traps', exerciseCount: 6 },
  {
    day: 'Friday',
    focus: 'Upper Body (Strength & Hypertrophy)',
    exerciseCount: 7
  },
  {
    day: 'Saturday',
    focus: 'Lower Body (Hypertrophy Focus)',
    exerciseCount: 7
  },
  { day: 'Sunday', focus: 'Active Recovery & Core', exerciseCount: 7 }
]
[AI WORKOUT] Debug: workoutFrequency=6_7, expectedDays=7, actualDays=7
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 7
[AI WORKOUT] - Days with exercises: 7
[AI WORKOUT] - Day 1 (Chest & Triceps): 7 exercises
[AI WORKOUT] - Day 2 (Back & Biceps): 7 exercises
[AI WORKOUT] - Day 3 (Legs & Abs): 8 exercises
[AI WORKOUT] - Day 4 (Shoulders & Traps): 6 exercises
[AI WORKOUT] - Day 5 (Upper Body (Strength & Hypertrophy)): 7 exercises
[AI WORKOUT] - Day 6 (Lower Body (Hypertrophy Focus)): 7 exercises
[AI WORKOUT] - Day 7 (Active Recovery & Core): 7 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 7
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Chest & Triceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Back & Biceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs & Abs',
    exerciseCount: 8,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Shoulders & Traps',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Upper Body (Strength & Hypertrophy)',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Saturday',
    focus: 'Lower Body (Hypertrophy Focus)',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Sunday',
    focus: 'Active Recovery & Core',
    exerciseCount: 7,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 7
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 7
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Chest & Triceps', exerciseCount: 7 },
  { focus: 'Back & Biceps', exerciseCount: 7 },
  { focus: 'Legs & Abs', exerciseCount: 8 },
  { focus: 'Shoulders & Traps', exerciseCount: 6 },
  { focus: 'Upper Body (Strength & Hypertrophy)', exerciseCount: 7 },
  { focus: 'Lower Body (Hypertrophy Focus)', exerciseCount: 7 },
  { focus: 'Active Recovery & Core', exerciseCount: 7 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 7
[applyWeeklyDistribution] ğŸ” workoutFrequency: 6_7
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Chest & Triceps' },
  { day: 'Tuesday', focus: 'Back & Biceps' },
  { day: 'Wednesday', focus: 'Legs & Abs' },
  { day: 'Thursday', focus: 'Shoulders & Traps' },
  { day: 'Friday', focus: 'Upper Body (Strength & Hypertrophy)' },
  { day: 'Saturday', focus: 'Lower Body (Hypertrophy Focus)' },
  { day: 'Sunday', focus: 'Active Recovery & Core' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 7 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 7 | Rest days: 0
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 7 },
  { day: 'Wednesday', focus: 'Legs & Abs', exerciseCount: 8 },
  { day: 'Thursday', focus: 'Shoulders & Traps', exerciseCount: 6 },
  {
    day: 'Friday',
    focus: 'Upper Body (Strength & Hypertrophy)',
    exerciseCount: 7
  },
  {
    day: 'Saturday',
    focus: 'Lower Body (Hypertrophy Focus)',
    exerciseCount: 7
  },
  { day: 'Sunday', focus: 'Active Recovery & Core', exerciseCount: 7 }
]
{"level":30,"time":1761191926777,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":24,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"181","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":63301},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"7189","etag":"W/\"1c15-LzZGAe3EjeRcWoXSpIgMyHsMknI\""}},"responseTime":48775,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User 2_3',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '2_3',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6502 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 3 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 3 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6502
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 4956
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User 2_3's Muscle Gain PPL 3-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Target upper chest. Maintain a slight arch in the lower back and drive through the dumbbells."
        },
        {
          "name": "Barbell Overhead Press",
          "sets": 3,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Press the bar directly overhead, locking out the elbows. Keep core tight to protect the lower back."
        },
        {
          "name": "Dumbbell Latera
[GEMINI TEXT] Workout plan generated in 17918ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User 2_3's Muscle Gain PPL 3-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell Press",
        
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 4956
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User 2_3's Muscle Gain PPL 3-Day Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Push (Chest, Shoulders, Triceps)", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Focus on controlled eccentric and powerful concentric. Ensure full range of motion." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "8-12", "rest": "90-120s", "notes": "Target upper chest. Maintain a slight arch in the lower back a...
[GEMINI TEXT] Characters around position 334: full range of motion." }, { "n
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User 2_3's Muscle Gain PPL 3-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
   ...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User 2_3's Muscle Gain PPL 3-Day Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User 2_3's Muscle Gain PPL 3-Day Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 3
[WORKOUT] ğŸ” Raw plan days: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6
  },
  { day: 'Wednesday', focus: 'Pull (Back, Biceps)', exerciseCount: 6 },
  {
    day: 'Friday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  }
]
[AI WORKOUT] Debug: workoutFrequency=2_3, expectedDays=3, actualDays=3
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 3
[AI WORKOUT] - Days with exercises: 3
[AI WORKOUT] - Day 1 (Push (Chest, Shoulders, Triceps)): 6 exercises
[AI WORKOUT] - Day 2 (Pull (Back, Biceps)): 6 exercises
[AI WORKOUT] - Day 3 (Legs (Quads, Hamstrings, Glutes, Calves)): 6 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 3
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Pull (Back, Biceps)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 3
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 3
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Push (Chest, Shoulders, Triceps)', exerciseCount: 6 },
  { focus: 'Pull (Back, Biceps)', exerciseCount: 6 },
  {
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 3
[applyWeeklyDistribution] ğŸ” workoutFrequency: 2_3
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 3
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Push (Chest, Shoulders, Triceps)' },
  { day: 'Tuesday', focus: 'Rest Day' },
  { day: 'Wednesday', focus: 'Pull (Back, Biceps)' },
  { day: 'Thursday', focus: 'Rest Day' },
  { day: 'Friday', focus: 'Legs (Quads, Hamstrings, Glutes, Calves)' },
  { day: 'Saturday', focus: 'Rest Day' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 3 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 3 | Rest days: 4
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6
  },
  { day: 'Tuesday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Wednesday', focus: 'Pull (Back, Biceps)', exerciseCount: 6 },
  { day: 'Thursday', focus: 'Rest Day', exerciseCount: 0 },
  {
    day: 'Friday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  },
  { day: 'Saturday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761191975538,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":25,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"181","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":63482},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"3559","etag":"W/\"de7-6zj/gqDkBuXeQec6WigMRgTNzXE\""}},"responseTime":17919,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User 3_4',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '3_4',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6534 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 5 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 5 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6534
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 9487
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User 3_4's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Primary compound movement for chest. Focus on controlled descent and powerful press. Aim for progressive overload."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Targets the upper chest. Maintain a slight arch and squeeze at the top."
        },
        {
          "name": "Cable Crossover (High to Low)",
          "sets": 3,
          "reps": "10-15",
          "rest": "90s",
          "notes": "Focus on a strong contraction in the inner and lower chest. Control the negative."
        },
        {
          "name": "Dumbbell Flyes",
          "sets": 3,
  
[GEMINI TEXT] Workout plan generated in 27393ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User 3_4's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Primary compound movement for chest. Focus on controlled descent and powerful press. Aim for progressive overload."
        },
        {
          "name": "Incline Dumbbell Press
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 9487
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User 3_4's muscle gain 5 days Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Chest & Triceps", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Primary compound movement for chest. Focus on controlled descent and powerful press. Aim for progressive overload." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "8-12", "rest": "90-120s", "notes": "Targets the upper chest. Maintain a slight arch and...
[GEMINI TEXT] Characters around position 334: s. Aim for progressive overloa
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User 3_4's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barb...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User 3_4's muscle gain 5 days Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 8,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 8,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User 3_4's muscle gain 5 days Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 5
[WORKOUT] ğŸ” Raw plan days: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 7 },
  { day: 'Wednesday', focus: 'Legs & Glutes', exerciseCount: 7 },
  { day: 'Thursday', focus: 'Shoulders & Traps', exerciseCount: 8 },
  { day: 'Friday', focus: 'Arms & Calves', exerciseCount: 8 }
]
[AI WORKOUT] Debug: workoutFrequency=3_4, expectedDays=5, actualDays=5
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 5
[AI WORKOUT] - Days with exercises: 5
[AI WORKOUT] - Day 1 (Chest & Triceps): 7 exercises
[AI WORKOUT] - Day 2 (Back & Biceps): 7 exercises
[AI WORKOUT] - Day 3 (Legs & Glutes): 7 exercises
[AI WORKOUT] - Day 4 (Shoulders & Traps): 8 exercises
[AI WORKOUT] - Day 5 (Arms & Calves): 8 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 5
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Chest & Triceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Back & Biceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs & Glutes',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Shoulders & Traps',
    exerciseCount: 8,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Arms & Calves',
    exerciseCount: 8,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 5
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 5
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Chest & Triceps', exerciseCount: 7 },
  { focus: 'Back & Biceps', exerciseCount: 7 },
  { focus: 'Legs & Glutes', exerciseCount: 7 },
  { focus: 'Shoulders & Traps', exerciseCount: 8 },
  { focus: 'Arms & Calves', exerciseCount: 8 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 5
[applyWeeklyDistribution] ğŸ” workoutFrequency: 3_4
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 5
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Chest & Triceps' },
  { day: 'Tuesday', focus: 'Back & Biceps' },
  { day: 'Wednesday', focus: 'Rest Day' },
  { day: 'Thursday', focus: 'Legs & Glutes' },
  { day: 'Friday', focus: 'Shoulders & Traps' },
  { day: 'Saturday', focus: 'Arms & Calves' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 5 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 5 | Rest days: 2
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 7 },
  { day: 'Wednesday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Thursday', focus: 'Legs & Glutes', exerciseCount: 7 },
  { day: 'Friday', focus: 'Shoulders & Traps', exerciseCount: 8 },
  { day: 'Saturday', focus: 'Arms & Calves', exerciseCount: 8 },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761192004438,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":26,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"181","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":63482},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"5506","etag":"W/\"1582-MIE329oeki9TTuEBHVJ0oOf0Aig\""}},"responseTime":27395,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User 4_5',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '4_5',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6534 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 5 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 5 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6534
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 8806
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User 4_5's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 4,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Target upper chest. Maintain a slight arch in the back and drive dumbbells up."
        },
        {
          "name": "Pec Deck Fly",
          "sets": 3,
          "reps": "10-15",
          "rest": "60-90s",
          "notes": "Isolation for chest. Focus on squeezing the chest at the peak contraction. Control the stretch."
        },
        {
          "name": "Cable Crossover (High to Lo
[GEMINI TEXT] Workout plan generated in 31255ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User 4_5's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 8806
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User 4_5's muscle gain 5 days Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Chest & Triceps", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Ensure full range of motion." }, { "name": "Incline Dumbbell Press", "sets": 4, "reps": "8-12", "rest": "90-120s", "notes": "Target upper chest. Maintain a slight arch in...
[GEMINI TEXT] Characters around position 334: ncentric. Ensure full range of
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User 4_5's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barb...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User 4_5's muscle gain 5 days Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User 4_5's muscle gain 5 days Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 5
[WORKOUT] ğŸ” Raw plan days: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Rear Delts', exerciseCount: 6 },
  { day: 'Wednesday', focus: 'Legs & Glutes', exerciseCount: 6 },
  { day: 'Thursday', focus: 'Shoulders & Traps', exerciseCount: 6 },
  { day: 'Friday', focus: 'Arms & Abs', exerciseCount: 7 }
]
[AI WORKOUT] Debug: workoutFrequency=4_5, expectedDays=5, actualDays=5
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 5
[AI WORKOUT] - Days with exercises: 5
[AI WORKOUT] - Day 1 (Chest & Triceps): 7 exercises
[AI WORKOUT] - Day 2 (Back & Rear Delts): 6 exercises
[AI WORKOUT] - Day 3 (Legs & Glutes): 6 exercises
[AI WORKOUT] - Day 4 (Shoulders & Traps): 6 exercises
[AI WORKOUT] - Day 5 (Arms & Abs): 7 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 5
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Chest & Triceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Back & Rear Delts',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs & Glutes',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Shoulders & Traps',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Arms & Abs',
    exerciseCount: 7,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 5
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 5
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Chest & Triceps', exerciseCount: 7 },
  { focus: 'Back & Rear Delts', exerciseCount: 6 },
  { focus: 'Legs & Glutes', exerciseCount: 6 },
  { focus: 'Shoulders & Traps', exerciseCount: 6 },
  { focus: 'Arms & Abs', exerciseCount: 7 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 5
[applyWeeklyDistribution] ğŸ” workoutFrequency: 4_5
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 5
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Chest & Triceps' },
  { day: 'Tuesday', focus: 'Back & Rear Delts' },
  { day: 'Wednesday', focus: 'Rest Day' },
  { day: 'Thursday', focus: 'Legs & Glutes' },
  { day: 'Friday', focus: 'Shoulders & Traps' },
  { day: 'Saturday', focus: 'Arms & Abs' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 5 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 5 | Rest days: 2
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Rear Delts', exerciseCount: 6 },
  { day: 'Wednesday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Thursday', focus: 'Legs & Glutes', exerciseCount: 6 },
  { day: 'Friday', focus: 'Shoulders & Traps', exerciseCount: 6 },
  { day: 'Saturday', focus: 'Arms & Abs', exerciseCount: 7 },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761192037200,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":27,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"181","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":63482},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"5034","etag":"W/\"13aa-DFlqapZU78zQIayy7g3JkZ1DdDE\""}},"responseTime":31258,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User 5_6',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '5_6',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6534 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 5 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 5 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6534
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 8809
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User 5_6's Elite Muscle Gain 5-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps Hypertrophy",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Target upper chest. Keep elbows slightly tucked to protect shoulders."
        },
        {
          "name": "Pec Deck Fly",
          "sets": 3,
          "reps": "10-15",
          "rest": "60-90s",
          "notes": "Squeeze chest at the peak contraction. Maintain constant tension."
        },
        {
          "name": "Cable Crossover (High to Low)",
          "sets": 3,
          "reps": "10-15",
      
[GEMINI TEXT] Workout plan generated in 21222ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User 5_6's Elite Muscle Gain 5-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps Hypertrophy",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell Press",
          "
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 8809
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User 5_6's Elite Muscle Gain 5-Day Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Chest & Triceps Hypertrophy", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Focus on controlled eccentric and powerful concentric. Ensure full range of motion." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "8-12", "rest": "90-120s", "notes": "Target upper chest. Keep elbows slightly tucked to protect should...
[GEMINI TEXT] Characters around position 334: l range of motion." }, { "name
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User 5_6's Elite Muscle Gain 5-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps Hypertrophy",
      "exercises": [
        {
      ...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User 5_6's Elite Muscle Gain 5-Day Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User 5_6's Elite Muscle Gain 5-Day Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 5
[WORKOUT] ğŸ” Raw plan days: [
  {
    day: 'Monday',
    focus: 'Chest & Triceps Hypertrophy',
    exerciseCount: 7
  },
  { day: 'Tuesday', focus: 'Back & Biceps Power', exerciseCount: 7 },
  {
    day: 'Wednesday',
    focus: 'Legs & Calves Strength',
    exerciseCount: 7
  },
  {
    day: 'Thursday',
    focus: 'Shoulders & Abs Definition',
    exerciseCount: 7
  },
  {
    day: 'Friday',
    focus: 'Upper Body Compound & Accessory',
    exerciseCount: 7
  }
]
[AI WORKOUT] Debug: workoutFrequency=5_6, expectedDays=5, actualDays=5
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 5
[AI WORKOUT] - Days with exercises: 5
[AI WORKOUT] - Day 1 (Chest & Triceps Hypertrophy): 7 exercises
[AI WORKOUT] - Day 2 (Back & Biceps Power): 7 exercises
[AI WORKOUT] - Day 3 (Legs & Calves Strength): 7 exercises
[AI WORKOUT] - Day 4 (Shoulders & Abs Definition): 7 exercises
[AI WORKOUT] - Day 5 (Upper Body Compound & Accessory): 7 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 5
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Chest & Triceps Hypertrophy',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Back & Biceps Power',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs & Calves Strength',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Shoulders & Abs Definition',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Upper Body Compound & Accessory',
    exerciseCount: 7,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 5
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 5
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Chest & Triceps Hypertrophy', exerciseCount: 7 },
  { focus: 'Back & Biceps Power', exerciseCount: 7 },
  { focus: 'Legs & Calves Strength', exerciseCount: 7 },
  { focus: 'Shoulders & Abs Definition', exerciseCount: 7 },
  { focus: 'Upper Body Compound & Accessory', exerciseCount: 7 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 5
[applyWeeklyDistribution] ğŸ” workoutFrequency: 5_6
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 5
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Chest & Triceps Hypertrophy' },
  { day: 'Tuesday', focus: 'Back & Biceps Power' },
  { day: 'Wednesday', focus: 'Rest Day' },
  { day: 'Thursday', focus: 'Legs & Calves Strength' },
  { day: 'Friday', focus: 'Shoulders & Abs Definition' },
  { day: 'Saturday', focus: 'Upper Body Compound & Accessory' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 5 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 5 | Rest days: 2
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  {
    day: 'Monday',
    focus: 'Chest & Triceps Hypertrophy',
    exerciseCount: 7
  },
  { day: 'Tuesday', focus: 'Back & Biceps Power', exerciseCount: 7 },
  { day: 'Wednesday', focus: 'Rest Day', exerciseCount: 0 },
  {
    day: 'Thursday',
    focus: 'Legs & Calves Strength',
    exerciseCount: 7
  },
  {
    day: 'Friday',
    focus: 'Shoulders & Abs Definition',
    exerciseCount: 7
  },
  {
    day: 'Saturday',
    focus: 'Upper Body Compound & Accessory',
    exerciseCount: 7
  },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761192059928,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":28,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"181","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":63482},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"5528","etag":"W/\"1598-3MbQ4QkYBStarRvrGN1P4UJyNt8\""}},"responseTime":21225,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User 6_7',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '6_7',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6534 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 7 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 7 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6534
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 11282
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User 6_7's Muscle Gain 7-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Target the upper chest. Maintain a slight arch in the lower back."
        },
        {
          "name": "Seated Overhead Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Press dumbbells directly overhead, avoiding excessive arching of the back. Control the descent."
        },
        {
          "name": "Dumbbell Lateral Raise",
          "sets": 
[GEMINI TEXT] Workout plan generated in 49628ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User 6_7's Muscle Gain 7-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell Press",
          "s
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 11282
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User 6_7's Muscle Gain 7-Day Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Push (Chest, Shoulders, Triceps)", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Focus on controlled eccentric and powerful concentric. Ensure full range of motion." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "8-12", "rest": "90-120s", "notes": "Target the upper chest. Maintain a slight arch in the lower back."...
[GEMINI TEXT] Characters around position 334:  range of motion." }, { "name"
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User 6_7's Muscle Gain 7-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
       ...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User 6_7's Muscle Gain 7-Day Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User 6_7's Muscle Gain 7-Day Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 7
[WORKOUT] ğŸ” Raw plan days: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6
  },
  { day: 'Tuesday', focus: 'Pull (Back, Biceps)', exerciseCount: 6 },
  {
    day: 'Wednesday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  },
  { day: 'Thursday', focus: 'Upper Body', exerciseCount: 6 },
  { day: 'Friday', focus: 'Lower Body', exerciseCount: 6 },
  { day: 'Saturday', focus: 'Full Body', exerciseCount: 6 },
  { day: 'Sunday', focus: 'Active Recovery & Core', exerciseCount: 6 }
]
[AI WORKOUT] Debug: workoutFrequency=6_7, expectedDays=7, actualDays=7
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 7
[AI WORKOUT] - Days with exercises: 7
[AI WORKOUT] - Day 1 (Push (Chest, Shoulders, Triceps)): 6 exercises
[AI WORKOUT] - Day 2 (Pull (Back, Biceps)): 6 exercises
[AI WORKOUT] - Day 3 (Legs (Quads, Hamstrings, Glutes, Calves)): 6 exercises
[AI WORKOUT] - Day 4 (Upper Body): 6 exercises
[AI WORKOUT] - Day 5 (Lower Body): 6 exercises
[AI WORKOUT] - Day 6 (Full Body): 6 exercises
[AI WORKOUT] - Day 7 (Active Recovery & Core): 6 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 7
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Pull (Back, Biceps)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Upper Body',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Lower Body',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Saturday',
    focus: 'Full Body',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Sunday',
    focus: 'Active Recovery & Core',
    exerciseCount: 6,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 7
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 7
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Push (Chest, Shoulders, Triceps)', exerciseCount: 6 },
  { focus: 'Pull (Back, Biceps)', exerciseCount: 6 },
  {
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  },
  { focus: 'Upper Body', exerciseCount: 6 },
  { focus: 'Lower Body', exerciseCount: 6 },
  { focus: 'Full Body', exerciseCount: 6 },
  { focus: 'Active Recovery & Core', exerciseCount: 6 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 7
[applyWeeklyDistribution] ğŸ” workoutFrequency: 6_7
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Push (Chest, Shoulders, Triceps)' },
  { day: 'Tuesday', focus: 'Pull (Back, Biceps)' },
  {
    day: 'Wednesday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)'
  },
  { day: 'Thursday', focus: 'Upper Body' },
  { day: 'Friday', focus: 'Lower Body' },
  { day: 'Saturday', focus: 'Full Body' },
  { day: 'Sunday', focus: 'Active Recovery & Core' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 7 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 7 | Rest days: 0
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6
  },
  { day: 'Tuesday', focus: 'Pull (Back, Biceps)', exerciseCount: 6 },
  {
    day: 'Wednesday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  },
  { day: 'Thursday', focus: 'Upper Body', exerciseCount: 6 },
  { day: 'Friday', focus: 'Lower Body', exerciseCount: 6 },
  { day: 'Saturday', focus: 'Full Body', exerciseCount: 6 },
  { day: 'Sunday', focus: 'Active Recovery & Core', exerciseCount: 6 }
]
{"level":30,"time":1761192111063,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":29,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"181","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":63482},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"6421","etag":"W/\"1915-mmRJqwqXCmM7iaAQRWmpAXn4A5s\""}},"responseTime":49631,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User 2_3',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '2_3',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6502 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 3 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 3 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6502
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 6057
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User 2_3's Intermediate Muscle Gain Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest, Shoulders & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Compound movement, focus on controlled eccentric and powerful concentric. Maintain a slight arch in the lower back."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 4,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Target upper chest. Squeeze dumbbells at the top, ensure full stretch at the bottom."
        },
        {
          "name": "Machine Chest Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Consistent tension throughout the movement, focus on mind-muscle connection with the chest."
        },
        {
          "name": "Standi
[GEMINI TEXT] Workout plan generated in 49309ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User 2_3's Intermediate Muscle Gain Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest, Shoulders & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Compound movement, focus on controlled eccentric and powerful concentric. Maintain a slight arch in the lower back."
        },
        {
          "name": "Incl
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 6057
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User 2_3's Intermediate Muscle Gain Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Chest, Shoulders & Triceps", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Compound movement, focus on controlled eccentric and powerful concentric. Maintain a slight arch in the lower back." }, { "name": "Incline Dumbbell Press", "sets": 4, "reps": "8-12", "rest": "90-120s", "notes": "Target upper chest. Squeeze dumbb...
[GEMINI TEXT] Characters around position 334: centric. Maintain a slight arc
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User 2_3's Intermediate Muscle Gain Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest, Shoulders & Triceps",
      "exercises": [
        {
      ...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User 2_3's Intermediate Muscle Gain Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User 2_3's Intermediate Muscle Gain Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 3
[WORKOUT] ğŸ” Raw plan days: [
  {
    day: 'Monday',
    focus: 'Chest, Shoulders & Triceps',
    exerciseCount: 7
  },
  { day: 'Wednesday', focus: 'Back & Biceps', exerciseCount: 7 },
  { day: 'Friday', focus: 'Legs & Glutes', exerciseCount: 7 }
]
[AI WORKOUT] Debug: workoutFrequency=2_3, expectedDays=3, actualDays=3
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 3
[AI WORKOUT] - Days with exercises: 3
[AI WORKOUT] - Day 1 (Chest, Shoulders & Triceps): 7 exercises
[AI WORKOUT] - Day 2 (Back & Biceps): 7 exercises
[AI WORKOUT] - Day 3 (Legs & Glutes): 7 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 3
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Chest, Shoulders & Triceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Back & Biceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Legs & Glutes',
    exerciseCount: 7,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 3
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 3
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Chest, Shoulders & Triceps', exerciseCount: 7 },
  { focus: 'Back & Biceps', exerciseCount: 7 },
  { focus: 'Legs & Glutes', exerciseCount: 7 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 3
[applyWeeklyDistribution] ğŸ” workoutFrequency: 2_3
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 3
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Chest, Shoulders & Triceps' },
  { day: 'Tuesday', focus: 'Rest Day' },
  { day: 'Wednesday', focus: 'Back & Biceps' },
  { day: 'Thursday', focus: 'Rest Day' },
  { day: 'Friday', focus: 'Legs & Glutes' },
  { day: 'Saturday', focus: 'Rest Day' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 3 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 3 | Rest days: 4
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  {
    day: 'Monday',
    focus: 'Chest, Shoulders & Triceps',
    exerciseCount: 7
  },
  { day: 'Tuesday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Wednesday', focus: 'Back & Biceps', exerciseCount: 7 },
  { day: 'Thursday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Friday', focus: 'Legs & Glutes', exerciseCount: 7 },
  { day: 'Saturday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761192247392,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":30,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"181","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":63782},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"3809","etag":"W/\"ee1-MWPeyINz0MY4lmsHXL6nEtiP/aw\""}},"responseTime":49311,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User 3_4',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '3_4',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6534 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 5 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 5 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6534
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Error in generateContentWithRetry attempt 1: [GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent: fetch failed
[GEMINI TEXT] Error stack: TypeError: fetch failed
    at node:internal/deps/undici/undici:13502:13
    at async makeRequest (/Users/ngkwanho/Desktop/GoFitAI/server/node_modules/@google/generative-ai/dist/index.js:397:20)
    at async generateContent (/Users/ngkwanho/Desktop/GoFitAI/server/node_modules/@google/generative-ai/dist/index.js:867:22)
    at async GeminiTextService.generateWorkoutPlan (/Users/ngkwanho/Desktop/GoFitAI/server/services/geminiTextService.js:431:26)
    at async /Users/ngkwanho/Desktop/GoFitAI/server/index.js:2318:23
[GEMINI TEXT] Error constructor: GoogleGenerativeAIError
[GEMINI TEXT] âš ï¸ Retryable error (attempt 1), retrying in 500ms...
[GEMINI TEXT] Error type: GoogleGenerativeAIError
[GEMINI TEXT] Error message: [GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent: fetch failed
[GEMINI TEXT] Network error detected: true
[GEMINI TEXT] Attempt 2/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 2
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 9101
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User 3_4's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Compound movement for overall chest development. Focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Targets upper chest. Maintain a slight arch in the lower back and drive through the dumbbells."
        },
        {
          "name": "Dumbbell Fly",
          "sets": 3,
          "reps": "10-12",
          "rest": "90s",
          "notes": "Isolation movement for chest stretch and contraction. Keep a slight bend in the elbows and focus on squeezing the pecs."
        },
       
[GEMINI TEXT] Workout plan generated in 101569ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User 3_4's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Compound movement for overall chest development. Focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incl
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 9101
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User 3_4's muscle gain 5 days Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Chest & Triceps", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Compound movement for overall chest development. Focus on controlled eccentric and powerful concentric. Ensure full range of motion." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "8-12", "rest": "90-120s", "notes": "Targets upper chest. Maintain a s...
[GEMINI TEXT] Characters around position 334:  powerful concentric. Ensure f
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User 3_4's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barb...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User 3_4's muscle gain 5 days Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 5,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User 3_4's muscle gain 5 days Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 5
[WORKOUT] ğŸ” Raw plan days: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 7 },
  { day: 'Wednesday', focus: 'Legs & Core', exerciseCount: 7 },
  { day: 'Thursday', focus: 'Shoulders & Traps', exerciseCount: 5 },
  {
    day: 'Friday',
    focus: 'Upper Body Strength & Arms',
    exerciseCount: 6
  }
]
[AI WORKOUT] Debug: workoutFrequency=3_4, expectedDays=5, actualDays=5
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 5
[AI WORKOUT] - Days with exercises: 5
[AI WORKOUT] - Day 1 (Chest & Triceps): 7 exercises
[AI WORKOUT] - Day 2 (Back & Biceps): 7 exercises
[AI WORKOUT] - Day 3 (Legs & Core): 7 exercises
[AI WORKOUT] - Day 4 (Shoulders & Traps): 5 exercises
[AI WORKOUT] - Day 5 (Upper Body Strength & Arms): 6 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 5
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Chest & Triceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Back & Biceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs & Core',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Shoulders & Traps',
    exerciseCount: 5,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Upper Body Strength & Arms',
    exerciseCount: 6,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 5
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 5
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Chest & Triceps', exerciseCount: 7 },
  { focus: 'Back & Biceps', exerciseCount: 7 },
  { focus: 'Legs & Core', exerciseCount: 7 },
  { focus: 'Shoulders & Traps', exerciseCount: 5 },
  { focus: 'Upper Body Strength & Arms', exerciseCount: 6 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 5
[applyWeeklyDistribution] ğŸ” workoutFrequency: 3_4
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 5
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Chest & Triceps' },
  { day: 'Tuesday', focus: 'Back & Biceps' },
  { day: 'Wednesday', focus: 'Rest Day' },
  { day: 'Thursday', focus: 'Legs & Core' },
  { day: 'Friday', focus: 'Shoulders & Traps' },
  { day: 'Saturday', focus: 'Upper Body Strength & Arms' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 5 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 5 | Rest days: 2
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 7 },
  { day: 'Wednesday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Thursday', focus: 'Legs & Core', exerciseCount: 7 },
  { day: 'Friday', focus: 'Shoulders & Traps', exerciseCount: 5 },
  {
    day: 'Saturday',
    focus: 'Upper Body Strength & Arms',
    exerciseCount: 6
  },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761192350472,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":31,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"181","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":63782},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"5071","etag":"W/\"13cf-g0v9pwEfOB69r+t/thwwfJRdxLg\""}},"responseTime":101572,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User 4_5',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '4_5',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6534 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 5 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 5 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6534
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 9547
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User 4_5's Muscle Gain 5-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Target upper chest. Maintain a slight arch in the back and drive through the dumbbells."
        },
        {
          "name": "Cable Crossover (High to Low)",
          "sets": 3,
          "reps": "10-15",
          "rest": "60-90s",
          "notes": "Focus on squeezing the chest at the bottom of the movement. Control the negative."
        },
        {
          "name": "Machine Chest Pr
[GEMINI TEXT] Workout plan generated in 31253ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User 4_5's Muscle Gain 5-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell 
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 9547
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User 4_5's Muscle Gain 5-Day Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Chest & Triceps", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Ensure full range of motion." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "8-12", "rest": "90-120s", "notes": "Target upper chest. Maintain a slight arch in ...
[GEMINI TEXT] Characters around position 334: centric. Ensure full range of 
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User 4_5's Muscle Gain 5-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbe...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User 4_5's Muscle Gain 5-Day Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User 4_5's Muscle Gain 5-Day Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 5
[WORKOUT] ğŸ” Raw plan days: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 7 },
  { day: 'Wednesday', focus: 'Legs & Glutes', exerciseCount: 7 },
  { day: 'Thursday', focus: 'Shoulders & Traps', exerciseCount: 7 },
  { day: 'Friday', focus: 'Arms & Abs', exerciseCount: 7 }
]
[AI WORKOUT] Debug: workoutFrequency=4_5, expectedDays=5, actualDays=5
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 5
[AI WORKOUT] - Days with exercises: 5
[AI WORKOUT] - Day 1 (Chest & Triceps): 7 exercises
[AI WORKOUT] - Day 2 (Back & Biceps): 7 exercises
[AI WORKOUT] - Day 3 (Legs & Glutes): 7 exercises
[AI WORKOUT] - Day 4 (Shoulders & Traps): 7 exercises
[AI WORKOUT] - Day 5 (Arms & Abs): 7 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 5
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Chest & Triceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Back & Biceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs & Glutes',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Shoulders & Traps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Arms & Abs',
    exerciseCount: 7,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 5
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 5
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Chest & Triceps', exerciseCount: 7 },
  { focus: 'Back & Biceps', exerciseCount: 7 },
  { focus: 'Legs & Glutes', exerciseCount: 7 },
  { focus: 'Shoulders & Traps', exerciseCount: 7 },
  { focus: 'Arms & Abs', exerciseCount: 7 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 5
[applyWeeklyDistribution] ğŸ” workoutFrequency: 4_5
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 5
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Chest & Triceps' },
  { day: 'Tuesday', focus: 'Back & Biceps' },
  { day: 'Wednesday', focus: 'Rest Day' },
  { day: 'Thursday', focus: 'Legs & Glutes' },
  { day: 'Friday', focus: 'Shoulders & Traps' },
  { day: 'Saturday', focus: 'Arms & Abs' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 5 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 5 | Rest days: 2
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 7 },
  { day: 'Wednesday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Thursday', focus: 'Legs & Glutes', exerciseCount: 7 },
  { day: 'Friday', focus: 'Shoulders & Traps', exerciseCount: 7 },
  { day: 'Saturday', focus: 'Arms & Abs', exerciseCount: 7 },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761192383233,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":32,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"181","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":63782},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"5391","etag":"W/\"150f-zW9riOFK8B+uqEUKElJsh482HAE\""}},"responseTime":31256,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User 5_6',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '5_6',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6534 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 5 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 5 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6534
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 8604
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User 5_6's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Focus on controlled eccentric and powerful concentric. Ensure full range of motion. Aim for progressive overload."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90s",
          "notes": "Emphasize upper chest. Keep dumbbells stable and squeeze at the top."
        },
        {
          "name": "Cable Crossover (Mid-Pulley)",
          "sets": 3,
          "reps": "10-15",
          "rest": "60-90s",
          "notes": "Focus on mind-muscle connection, contracting the chest. Slightly bend elbows."
        },
        {
          "name": "Close-Grip Barbell Bench Press",
          "sets":
[GEMINI TEXT] Workout plan generated in 29889ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User 5_6's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Focus on controlled eccentric and powerful concentric. Ensure full range of motion. Aim for progressive overload."
        },
        {
          "name": "Incline Dumbbell Press"
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 8604
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User 5_6's muscle gain 5 days Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Chest & Triceps", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Focus on controlled eccentric and powerful concentric. Ensure full range of motion. Aim for progressive overload." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "8-12", "rest": "90s", "notes": "Emphasize upper chest. Keep dumbbells stable and squeeze...
[GEMINI TEXT] Characters around position 334: . Aim for progressive overload
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User 5_6's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barb...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User 5_6's muscle gain 5 days Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User 5_6's muscle gain 5 days Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 5
[WORKOUT] ğŸ” Raw plan days: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 6 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 6 },
  { day: 'Wednesday', focus: 'Legs & Glutes', exerciseCount: 6 },
  { day: 'Thursday', focus: 'Shoulders & Traps', exerciseCount: 7 },
  { day: 'Friday', focus: 'Upper Body & Core', exerciseCount: 7 }
]
[AI WORKOUT] Debug: workoutFrequency=5_6, expectedDays=5, actualDays=5
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 5
[AI WORKOUT] - Days with exercises: 5
[AI WORKOUT] - Day 1 (Chest & Triceps): 6 exercises
[AI WORKOUT] - Day 2 (Back & Biceps): 6 exercises
[AI WORKOUT] - Day 3 (Legs & Glutes): 6 exercises
[AI WORKOUT] - Day 4 (Shoulders & Traps): 7 exercises
[AI WORKOUT] - Day 5 (Upper Body & Core): 7 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 5
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Chest & Triceps',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Back & Biceps',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs & Glutes',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Shoulders & Traps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Upper Body & Core',
    exerciseCount: 7,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 5
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 5
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Chest & Triceps', exerciseCount: 6 },
  { focus: 'Back & Biceps', exerciseCount: 6 },
  { focus: 'Legs & Glutes', exerciseCount: 6 },
  { focus: 'Shoulders & Traps', exerciseCount: 7 },
  { focus: 'Upper Body & Core', exerciseCount: 7 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 5
[applyWeeklyDistribution] ğŸ” workoutFrequency: 5_6
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 5
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Chest & Triceps' },
  { day: 'Tuesday', focus: 'Back & Biceps' },
  { day: 'Wednesday', focus: 'Rest Day' },
  { day: 'Thursday', focus: 'Legs & Glutes' },
  { day: 'Friday', focus: 'Shoulders & Traps' },
  { day: 'Saturday', focus: 'Upper Body & Core' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 5 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 5 | Rest days: 2
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 6 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 6 },
  { day: 'Wednesday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Thursday', focus: 'Legs & Glutes', exerciseCount: 6 },
  { day: 'Friday', focus: 'Shoulders & Traps', exerciseCount: 7 },
  { day: 'Saturday', focus: 'Upper Body & Core', exerciseCount: 7 },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761192414628,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":33,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"181","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":63782},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"5093","etag":"W/\"13e5-Pje1xX9nA1dIvjLJ/Ik6S2rM+FQ\""}},"responseTime":29892,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User 6_7',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '6_7',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6534 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 7 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 7 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6534
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 11621
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User 6_7's muscle gain 7 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Compound movement, focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Target the upper chest. Maintain a slight arch in the lower back and control the dumbbells."
        },
        {
          "name": "Dumbbell Lateral Raise",
          "sets": 3,
          "reps": "10-15",
          "rest": "60-90s",
          "notes": "Isolate the medial deltoids. Keep a slight bend in the elbows and lead with the elbows."
        },
        {
          "name": "Seated Dumbbe
[GEMINI TEXT] Workout plan generated in 29040ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User 6_7's muscle gain 7 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Compound movement, focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell 
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 11621
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User 6_7's muscle gain 7 days Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Push (Chest, Shoulders, Triceps)", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Compound movement, focus on controlled eccentric and powerful concentric. Ensure full range of motion." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "8-12", "rest": "90-120s", "notes": "Target the upper chest. Maintain a slight arch...
[GEMINI TEXT] Characters around position 334: centric. Ensure full range of 
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User 6_7's muscle gain 7 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
      ...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User 6_7's muscle gain 7 days Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User 6_7's muscle gain 7 days Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 7
[WORKOUT] ğŸ” Raw plan days: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6
  },
  { day: 'Tuesday', focus: 'Pull (Back, Biceps)', exerciseCount: 6 },
  {
    day: 'Wednesday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  },
  {
    day: 'Thursday',
    focus: 'Upper Body (Chest, Back, Shoulders, Arms)',
    exerciseCount: 7
  },
  {
    day: 'Friday',
    focus: 'Lower Body (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  },
  {
    day: 'Saturday',
    focus: 'Full Body Strength & Conditioning',
    exerciseCount: 6
  },
  { day: 'Sunday', focus: 'Active Recovery & Core', exerciseCount: 6 }
]
[AI WORKOUT] Debug: workoutFrequency=6_7, expectedDays=7, actualDays=7
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 7
[AI WORKOUT] - Days with exercises: 7
[AI WORKOUT] - Day 1 (Push (Chest, Shoulders, Triceps)): 6 exercises
[AI WORKOUT] - Day 2 (Pull (Back, Biceps)): 6 exercises
[AI WORKOUT] - Day 3 (Legs (Quads, Hamstrings, Glutes, Calves)): 6 exercises
[AI WORKOUT] - Day 4 (Upper Body (Chest, Back, Shoulders, Arms)): 7 exercises
[AI WORKOUT] - Day 5 (Lower Body (Quads, Hamstrings, Glutes, Calves)): 6 exercises
[AI WORKOUT] - Day 6 (Full Body Strength & Conditioning): 6 exercises
[AI WORKOUT] - Day 7 (Active Recovery & Core): 6 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 7
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Pull (Back, Biceps)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Upper Body (Chest, Back, Shoulders, Arms)',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Lower Body (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Saturday',
    focus: 'Full Body Strength & Conditioning',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Sunday',
    focus: 'Active Recovery & Core',
    exerciseCount: 6,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 7
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 7
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Push (Chest, Shoulders, Triceps)', exerciseCount: 6 },
  { focus: 'Pull (Back, Biceps)', exerciseCount: 6 },
  {
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  },
  {
    focus: 'Upper Body (Chest, Back, Shoulders, Arms)',
    exerciseCount: 7
  },
  {
    focus: 'Lower Body (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  },
  { focus: 'Full Body Strength & Conditioning', exerciseCount: 6 },
  { focus: 'Active Recovery & Core', exerciseCount: 6 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 7
[applyWeeklyDistribution] ğŸ” workoutFrequency: 6_7
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Push (Chest, Shoulders, Triceps)' },
  { day: 'Tuesday', focus: 'Pull (Back, Biceps)' },
  {
    day: 'Wednesday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)'
  },
  {
    day: 'Thursday',
    focus: 'Upper Body (Chest, Back, Shoulders, Arms)'
  },
  {
    day: 'Friday',
    focus: 'Lower Body (Quads, Hamstrings, Glutes, Calves)'
  },
  { day: 'Saturday', focus: 'Full Body Strength & Conditioning' },
  { day: 'Sunday', focus: 'Active Recovery & Core' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 7 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 7 | Rest days: 0
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6
  },
  { day: 'Tuesday', focus: 'Pull (Back, Biceps)', exerciseCount: 6 },
  {
    day: 'Wednesday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  },
  {
    day: 'Thursday',
    focus: 'Upper Body (Chest, Back, Shoulders, Arms)',
    exerciseCount: 7
  },
  {
    day: 'Friday',
    focus: 'Lower Body (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  },
  {
    day: 'Saturday',
    focus: 'Full Body Strength & Conditioning',
    exerciseCount: 6
  },
  { day: 'Sunday', focus: 'Active Recovery & Core', exerciseCount: 6 }
]
{"level":30,"time":1761192445177,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":34,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"181","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":63782},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"6781","etag":"W/\"1a7d-KNjUabtRyOLPI4fVSEURJfxg5v8\""}},"responseTime":29044,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User 2_3',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '2_3',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6502 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 3 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 3 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6502
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 5084
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User 2_3's muscle gain 3 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Focus on controlled eccentric and powerful concentric. Maintain a slight arch in the lower back and keep shoulder blades retracted."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Target the upper chest. Control the dumbbells throughout the movement, feeling the stretch at the bottom."
        },
        {
          "name": "Barbell Overhead Press",
          "sets": 3,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Press the bar directly overhead, locking out the elbows. Keep core tight to prevent excessive archi
[GEMINI TEXT] Workout plan generated in 16058ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User 2_3's muscle gain 3 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Focus on controlled eccentric and powerful concentric. Maintain a slight arch in the lower back and keep shoulder blades retracted."
        },
        {
       
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 5084
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User 2_3's muscle gain 3 days Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Push (Chest, Shoulders, Triceps)", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Focus on controlled eccentric and powerful concentric. Maintain a slight arch in the lower back and keep shoulder blades retracted." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "8-12", "rest": "90-120s", "notes": "Target the upper ...
[GEMINI TEXT] Characters around position 334:  slight arch in the lower back
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User 2_3's muscle gain 3 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
      ...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User 2_3's muscle gain 3 days Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User 2_3's muscle gain 3 days Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 3
[WORKOUT] ğŸ” Raw plan days: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6
  },
  { day: 'Wednesday', focus: 'Pull (Back & Biceps)', exerciseCount: 6 },
  { day: 'Friday', focus: 'Legs & Core', exerciseCount: 6 }
]
[AI WORKOUT] Debug: workoutFrequency=2_3, expectedDays=3, actualDays=3
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 3
[AI WORKOUT] - Days with exercises: 3
[AI WORKOUT] - Day 1 (Push (Chest, Shoulders, Triceps)): 6 exercises
[AI WORKOUT] - Day 2 (Pull (Back & Biceps)): 6 exercises
[AI WORKOUT] - Day 3 (Legs & Core): 6 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 3
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Pull (Back & Biceps)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Legs & Core',
    exerciseCount: 6,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 3
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 3
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Push (Chest, Shoulders, Triceps)', exerciseCount: 6 },
  { focus: 'Pull (Back & Biceps)', exerciseCount: 6 },
  { focus: 'Legs & Core', exerciseCount: 6 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 3
[applyWeeklyDistribution] ğŸ” workoutFrequency: 2_3
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 3
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Push (Chest, Shoulders, Triceps)' },
  { day: 'Tuesday', focus: 'Rest Day' },
  { day: 'Wednesday', focus: 'Pull (Back & Biceps)' },
  { day: 'Thursday', focus: 'Rest Day' },
  { day: 'Friday', focus: 'Legs & Core' },
  { day: 'Saturday', focus: 'Rest Day' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 3 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 3 | Rest days: 4
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6
  },
  { day: 'Tuesday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Wednesday', focus: 'Pull (Back & Biceps)', exerciseCount: 6 },
  { day: 'Thursday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Friday', focus: 'Legs & Core', exerciseCount: 6 },
  { day: 'Saturday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761192631225,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":35,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"181","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":64138},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"3550","etag":"W/\"dde-sUrR3k7oUFv8+nhNdypba+PGHpM\""}},"responseTime":16061,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User 3_4',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '3_4',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6534 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 5 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 5 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6534
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 9204
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User 3_4's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Compound movement, focus on form and progressive overload. Control the eccentric phase."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 4,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Targets upper chest. Squeeze at the top, control the descent."
        },
        {
          "name": "Pec Deck Fly",
          "sets": 4,
          "reps": "10-15",
          "rest": "90-120s",
          "notes": "Isolation for chest contraction. Focus on mind-muscle connection."
        },
        {
          "name": "Cable Crossover (High to Low)",
          "sets": 3,
          "reps": "10-15",
          "rest": "90-120s
[GEMINI TEXT] Workout plan generated in 35450ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User 3_4's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Compound movement, focus on form and progressive overload. Control the eccentric phase."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 4,
   
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 9204
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User 3_4's muscle gain 5 days Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Chest & Triceps", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Compound movement, focus on form and progressive overload. Control the eccentric phase." }, { "name": "Incline Dumbbell Press", "sets": 4, "reps": "8-12", "rest": "90-120s", "notes": "Targets upper chest. Squeeze at the top, control the descent." }, { "name": "P...
[GEMINI TEXT] Characters around position 334: hase." }, { "name": "Incline D
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User 3_4's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barb...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User 3_4's muscle gain 5 days Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 8,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User 3_4's muscle gain 5 days Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 5
[WORKOUT] ğŸ” Raw plan days: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 7 },
  { day: 'Wednesday', focus: 'Legs & Glutes', exerciseCount: 7 },
  { day: 'Thursday', focus: 'Shoulders & Traps', exerciseCount: 7 },
  { day: 'Friday', focus: 'Arms & Abs', exerciseCount: 8 }
]
[AI WORKOUT] Debug: workoutFrequency=3_4, expectedDays=5, actualDays=5
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 5
[AI WORKOUT] - Days with exercises: 5
[AI WORKOUT] - Day 1 (Chest & Triceps): 7 exercises
[AI WORKOUT] - Day 2 (Back & Biceps): 7 exercises
[AI WORKOUT] - Day 3 (Legs & Glutes): 7 exercises
[AI WORKOUT] - Day 4 (Shoulders & Traps): 7 exercises
[AI WORKOUT] - Day 5 (Arms & Abs): 8 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 5
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Chest & Triceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Back & Biceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs & Glutes',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Shoulders & Traps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Arms & Abs',
    exerciseCount: 8,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 5
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 5
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Chest & Triceps', exerciseCount: 7 },
  { focus: 'Back & Biceps', exerciseCount: 7 },
  { focus: 'Legs & Glutes', exerciseCount: 7 },
  { focus: 'Shoulders & Traps', exerciseCount: 7 },
  { focus: 'Arms & Abs', exerciseCount: 8 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 5
[applyWeeklyDistribution] ğŸ” workoutFrequency: 3_4
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 5
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Chest & Triceps' },
  { day: 'Tuesday', focus: 'Back & Biceps' },
  { day: 'Wednesday', focus: 'Rest Day' },
  { day: 'Thursday', focus: 'Legs & Glutes' },
  { day: 'Friday', focus: 'Shoulders & Traps' },
  { day: 'Saturday', focus: 'Arms & Abs' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 5 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 5 | Rest days: 2
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 7 },
  { day: 'Wednesday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Thursday', focus: 'Legs & Glutes', exerciseCount: 7 },
  { day: 'Friday', focus: 'Shoulders & Traps', exerciseCount: 7 },
  { day: 'Saturday', focus: 'Arms & Abs', exerciseCount: 8 },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761192668188,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":36,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"181","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":64138},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"5475","etag":"W/\"1563-jmSVosqrOH+VvPUYct5kPN8LaQs\""}},"responseTime":35454,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User 4_5',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '4_5',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6534 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 5 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 5 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6534
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 8946
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User 4_5's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 5,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Aim for progressive overload."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 4,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Targets upper chest. Ensure full range of motion and squeeze at the top."
        },
        {
          "name": "Cable Crossover (High to Low)",
          "sets": 3,
          "reps": "10-15",
          "rest": "90s",
          "notes": "Focus on mind-muscle connection, squeezing the chest at the bottom of the movement."
        },
        {
          "name": "Dumbbell Flyes",
          "se
[GEMINI TEXT] Workout plan generated in 28491ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User 4_5's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 5,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Aim for progressive overload."
        },
        {
          "name": "Incline Dumbbel
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 8946
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User 4_5's muscle gain 5 days Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Chest & Triceps", "exercises": [ { "name": "Barbell Bench Press", "sets": 5, "reps": "6-10", "rest": "90-120s", "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Aim for progressive overload." }, { "name": "Incline Dumbbell Press", "sets": 4, "reps": "8-12", "rest": "90-120s", "notes": "Targets upper chest. Ensure full range of mo...
[GEMINI TEXT] Characters around position 334: ncentric. Aim for progressive 
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User 4_5's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barb...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User 4_5's muscle gain 5 days Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User 4_5's muscle gain 5 days Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 5
[WORKOUT] ğŸ” Raw plan days: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 7 },
  { day: 'Wednesday', focus: 'Legs & Calves', exerciseCount: 7 },
  { day: 'Thursday', focus: 'Shoulders & Traps', exerciseCount: 6 },
  { day: 'Friday', focus: 'Upper Body & Core', exerciseCount: 7 }
]
[AI WORKOUT] Debug: workoutFrequency=4_5, expectedDays=5, actualDays=5
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 5
[AI WORKOUT] - Days with exercises: 5
[AI WORKOUT] - Day 1 (Chest & Triceps): 7 exercises
[AI WORKOUT] - Day 2 (Back & Biceps): 7 exercises
[AI WORKOUT] - Day 3 (Legs & Calves): 7 exercises
[AI WORKOUT] - Day 4 (Shoulders & Traps): 6 exercises
[AI WORKOUT] - Day 5 (Upper Body & Core): 7 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 5
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Chest & Triceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Back & Biceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs & Calves',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Shoulders & Traps',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Upper Body & Core',
    exerciseCount: 7,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 5
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 5
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Chest & Triceps', exerciseCount: 7 },
  { focus: 'Back & Biceps', exerciseCount: 7 },
  { focus: 'Legs & Calves', exerciseCount: 7 },
  { focus: 'Shoulders & Traps', exerciseCount: 6 },
  { focus: 'Upper Body & Core', exerciseCount: 7 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 5
[applyWeeklyDistribution] ğŸ” workoutFrequency: 4_5
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 5
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Chest & Triceps' },
  { day: 'Tuesday', focus: 'Back & Biceps' },
  { day: 'Wednesday', focus: 'Rest Day' },
  { day: 'Thursday', focus: 'Legs & Calves' },
  { day: 'Friday', focus: 'Shoulders & Traps' },
  { day: 'Saturday', focus: 'Upper Body & Core' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 5 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 5 | Rest days: 2
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 7 },
  { day: 'Wednesday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Thursday', focus: 'Legs & Calves', exerciseCount: 7 },
  { day: 'Friday', focus: 'Shoulders & Traps', exerciseCount: 6 },
  { day: 'Saturday', focus: 'Upper Body & Core', exerciseCount: 7 },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761192698187,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":37,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"181","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":64138},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"5287","etag":"W/\"14a7-mcJwy1W0FfP4pGr4QRo3GwonYhY\""}},"responseTime":28494,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User 5_6',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '5_6',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6534 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 5 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 5 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6534
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 9259
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User 5_6's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-12",
          "rest": "90-120s",
          "notes": "Compound movement for overall chest development. Focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "6-12",
          "rest": "90-120s",
          "notes": "Targets the upper chest. Maintain a slight arch in the lower back and drive through the dumbbells."
        },
        {
          "name": "Cable Crossover (High to Low)",
          "sets": 3,
          "reps": "8-15",
          "rest": "90-120s",
          "notes": "Isolation exercise to maximize chest contraction. Focus on squeezing the pecs at the bottom of the movement."
     
[GEMINI TEXT] Workout plan generated in 35518ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User 5_6's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-12",
          "rest": "90-120s",
          "notes": "Compound movement for overall chest development. Focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incl
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 9259
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User 5_6's muscle gain 5 days Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Chest & Triceps", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-12", "rest": "90-120s", "notes": "Compound movement for overall chest development. Focus on controlled eccentric and powerful concentric. Ensure full range of motion." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "6-12", "rest": "90-120s", "notes": "Targets the upper chest. Maintain...
[GEMINI TEXT] Characters around position 334:  powerful concentric. Ensure f
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User 5_6's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barb...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User 5_6's muscle gain 5 days Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User 5_6's muscle gain 5 days Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 5
[WORKOUT] ğŸ” Raw plan days: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 6 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 7 },
  { day: 'Wednesday', focus: 'Legs & Abs', exerciseCount: 7 },
  { day: 'Thursday', focus: 'Shoulders & Traps', exerciseCount: 7 },
  { day: 'Friday', focus: 'Upper Body Hypertrophy', exerciseCount: 7 }
]
[AI WORKOUT] Debug: workoutFrequency=5_6, expectedDays=5, actualDays=5
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 5
[AI WORKOUT] - Days with exercises: 5
[AI WORKOUT] - Day 1 (Chest & Triceps): 6 exercises
[AI WORKOUT] - Day 2 (Back & Biceps): 7 exercises
[AI WORKOUT] - Day 3 (Legs & Abs): 7 exercises
[AI WORKOUT] - Day 4 (Shoulders & Traps): 7 exercises
[AI WORKOUT] - Day 5 (Upper Body Hypertrophy): 7 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 5
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Chest & Triceps',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Back & Biceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs & Abs',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Shoulders & Traps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Upper Body Hypertrophy',
    exerciseCount: 7,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 5
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 5
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Chest & Triceps', exerciseCount: 6 },
  { focus: 'Back & Biceps', exerciseCount: 7 },
  { focus: 'Legs & Abs', exerciseCount: 7 },
  { focus: 'Shoulders & Traps', exerciseCount: 7 },
  { focus: 'Upper Body Hypertrophy', exerciseCount: 7 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 5
[applyWeeklyDistribution] ğŸ” workoutFrequency: 5_6
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 5
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Chest & Triceps' },
  { day: 'Tuesday', focus: 'Back & Biceps' },
  { day: 'Wednesday', focus: 'Rest Day' },
  { day: 'Thursday', focus: 'Legs & Abs' },
  { day: 'Friday', focus: 'Shoulders & Traps' },
  { day: 'Saturday', focus: 'Upper Body Hypertrophy' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 5 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 5 | Rest days: 2
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 6 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 7 },
  { day: 'Wednesday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Thursday', focus: 'Legs & Abs', exerciseCount: 7 },
  { day: 'Friday', focus: 'Shoulders & Traps', exerciseCount: 7 },
  {
    day: 'Saturday',
    focus: 'Upper Body Hypertrophy',
    exerciseCount: 7
  },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761192735211,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":38,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"181","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":64138},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"5334","etag":"W/\"14d6-4lHeRn38DktNpsOQS9MNAi1I1tk\""}},"responseTime":35521,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User 6_7',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '6_7',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6534 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 7 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 7 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6534
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 11146
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User 6_7's muscle gain 7 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Compound movement, focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Target upper chest. Keep dumbbells stable and squeeze at the top."
        },
        {
          "name": "Barbell Overhead Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Standing or seated. Drive the bar directly overhead, engaging core and glutes."
        },
        {
          "name": "Dumbbell Lateral Raise",
          "sets": 3,
  
[GEMINI TEXT] Workout plan generated in 38307ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User 6_7's muscle gain 7 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Compound movement, focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell 
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 11146
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User 6_7's muscle gain 7 days Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Push (Chest, Shoulders, Triceps)", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Compound movement, focus on controlled eccentric and powerful concentric. Ensure full range of motion." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "8-12", "rest": "90-120s", "notes": "Target upper chest. Keep dumbbells stable and ...
[GEMINI TEXT] Characters around position 334: centric. Ensure full range of 
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User 6_7's muscle gain 7 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
      ...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User 6_7's muscle gain 7 days Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 5,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User 6_7's muscle gain 7 days Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 7
[WORKOUT] ğŸ” Raw plan days: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6
  },
  { day: 'Tuesday', focus: 'Pull (Back, Biceps)', exerciseCount: 6 },
  {
    day: 'Wednesday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  },
  {
    day: 'Thursday',
    focus: 'Upper Body (Chest, Back, Shoulders, Arms)',
    exerciseCount: 7
  },
  {
    day: 'Friday',
    focus: 'Lower Body (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  },
  {
    day: 'Saturday',
    focus: 'Full Body / Accessory Focus',
    exerciseCount: 6
  },
  { day: 'Sunday', focus: 'Active Recovery & Core', exerciseCount: 5 }
]
[AI WORKOUT] Debug: workoutFrequency=6_7, expectedDays=7, actualDays=7
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 7
[AI WORKOUT] - Days with exercises: 7
[AI WORKOUT] - Day 1 (Push (Chest, Shoulders, Triceps)): 6 exercises
[AI WORKOUT] - Day 2 (Pull (Back, Biceps)): 6 exercises
[AI WORKOUT] - Day 3 (Legs (Quads, Hamstrings, Glutes, Calves)): 6 exercises
[AI WORKOUT] - Day 4 (Upper Body (Chest, Back, Shoulders, Arms)): 7 exercises
[AI WORKOUT] - Day 5 (Lower Body (Quads, Hamstrings, Glutes, Calves)): 6 exercises
[AI WORKOUT] - Day 6 (Full Body / Accessory Focus): 6 exercises
[AI WORKOUT] - Day 7 (Active Recovery & Core): 5 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 7
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Pull (Back, Biceps)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Upper Body (Chest, Back, Shoulders, Arms)',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Lower Body (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Saturday',
    focus: 'Full Body / Accessory Focus',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Sunday',
    focus: 'Active Recovery & Core',
    exerciseCount: 5,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 7
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 7
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Push (Chest, Shoulders, Triceps)', exerciseCount: 6 },
  { focus: 'Pull (Back, Biceps)', exerciseCount: 6 },
  {
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  },
  {
    focus: 'Upper Body (Chest, Back, Shoulders, Arms)',
    exerciseCount: 7
  },
  {
    focus: 'Lower Body (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  },
  { focus: 'Full Body / Accessory Focus', exerciseCount: 6 },
  { focus: 'Active Recovery & Core', exerciseCount: 5 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 7
[applyWeeklyDistribution] ğŸ” workoutFrequency: 6_7
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Push (Chest, Shoulders, Triceps)' },
  { day: 'Tuesday', focus: 'Pull (Back, Biceps)' },
  {
    day: 'Wednesday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)'
  },
  {
    day: 'Thursday',
    focus: 'Upper Body (Chest, Back, Shoulders, Arms)'
  },
  {
    day: 'Friday',
    focus: 'Lower Body (Quads, Hamstrings, Glutes, Calves)'
  },
  { day: 'Saturday', focus: 'Full Body / Accessory Focus' },
  { day: 'Sunday', focus: 'Active Recovery & Core' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 7 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 7 | Rest days: 0
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6
  },
  { day: 'Tuesday', focus: 'Pull (Back, Biceps)', exerciseCount: 6 },
  {
    day: 'Wednesday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  },
  {
    day: 'Thursday',
    focus: 'Upper Body (Chest, Back, Shoulders, Arms)',
    exerciseCount: 7
  },
  {
    day: 'Friday',
    focus: 'Lower Body (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  },
  {
    day: 'Saturday',
    focus: 'Full Body / Accessory Focus',
    exerciseCount: 6
  },
  { day: 'Sunday', focus: 'Active Recovery & Core', exerciseCount: 5 }
]
{"level":30,"time":1761192775025,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":39,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"181","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":64138},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"6499","etag":"W/\"1963-GwrlIAd10kOFpt7Go+sF2FMrb3Y\""}},"responseTime":38310,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User 2_3',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '2_3',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6502 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 3 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 3 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6502
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 5185
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User 2_3's Muscle Gain 3-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Focus on controlled eccentric and powerful concentric. Ensure full range of motion. Progressive overload is key."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Target the upper chest. Maintain a slight arch in the lower back and control the dumbbells."
        },
        {
          "name": "Barbell Overhead Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Stand tall, brace your core, and press the barbell directly overhead. Avoid leaning back excessively."
        },
        {
         
[GEMINI TEXT] Workout plan generated in 20094ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User 2_3's Muscle Gain 3-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Focus on controlled eccentric and powerful concentric. Ensure full range of motion. Progressive overload is key."
        },
        {
          "name": "Incline 
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 5185
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User 2_3's Muscle Gain 3-Day Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Push (Chest, Shoulders, Triceps)", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Focus on controlled eccentric and powerful concentric. Ensure full range of motion. Progressive overload is key." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "8-12", "rest": "90-120s", "notes": "Target the upper chest. Maintain a sl...
[GEMINI TEXT] Characters around position 334:  range of motion. Progressive 
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User 2_3's Muscle Gain 3-Day Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
       ...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User 2_3's Muscle Gain 3-Day Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User 2_3's Muscle Gain 3-Day Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 3
[WORKOUT] ğŸ” Raw plan days: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6
  },
  { day: 'Wednesday', focus: 'Pull (Back, Biceps)', exerciseCount: 6 },
  {
    day: 'Friday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  }
]
[AI WORKOUT] Debug: workoutFrequency=2_3, expectedDays=3, actualDays=3
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 3
[AI WORKOUT] - Days with exercises: 3
[AI WORKOUT] - Day 1 (Push (Chest, Shoulders, Triceps)): 6 exercises
[AI WORKOUT] - Day 2 (Pull (Back, Biceps)): 6 exercises
[AI WORKOUT] - Day 3 (Legs (Quads, Hamstrings, Glutes, Calves)): 6 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 3
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Pull (Back, Biceps)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 3
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 3
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Push (Chest, Shoulders, Triceps)', exerciseCount: 6 },
  { focus: 'Pull (Back, Biceps)', exerciseCount: 6 },
  {
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 3
[applyWeeklyDistribution] ğŸ” workoutFrequency: 2_3
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 3
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Push (Chest, Shoulders, Triceps)' },
  { day: 'Tuesday', focus: 'Rest Day' },
  { day: 'Wednesday', focus: 'Pull (Back, Biceps)' },
  { day: 'Thursday', focus: 'Rest Day' },
  { day: 'Friday', focus: 'Legs (Quads, Hamstrings, Glutes, Calves)' },
  { day: 'Saturday', focus: 'Rest Day' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 3 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 3 | Rest days: 4
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6
  },
  { day: 'Tuesday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Wednesday', focus: 'Pull (Back, Biceps)', exerciseCount: 6 },
  { day: 'Thursday', focus: 'Rest Day', exerciseCount: 0 },
  {
    day: 'Friday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  },
  { day: 'Saturday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761193225903,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":40,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"181","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":64827},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"3581","etag":"W/\"dfd-cL6WQ+y/pMVe1Bz4JdQyX/7/5n8\""}},"responseTime":20097,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User 3_4',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '3_4',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6534 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 5 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 5 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6534
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 9592
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User 3_4's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Target upper chest. Maintain a slight arch in your lower back and drive through the dumbbells."
        },
        {
          "name": "Pec Deck Fly",
          "sets": 3,
          "reps": "10-15",
          "rest": "90s",
          "notes": "Isolation for chest. Focus on squeezing the pecs at the peak contraction. Control the stretch."
        },
        {
          "name": "Cable Crossover
[GEMINI TEXT] Workout plan generated in 26039ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User 3_4's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 9592
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User 3_4's muscle gain 5 days Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Chest & Triceps", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Ensure full range of motion." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "8-12", "rest": "90-120s", "notes": "Target upper chest. Maintain a slight arch in...
[GEMINI TEXT] Characters around position 334: ncentric. Ensure full range of
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User 3_4's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barb...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User 3_4's muscle gain 5 days Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User 3_4's muscle gain 5 days Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 5
[WORKOUT] ğŸ” Raw plan days: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 7 },
  { day: 'Wednesday', focus: 'Legs & Glutes', exerciseCount: 7 },
  { day: 'Thursday', focus: 'Shoulders & Abs', exerciseCount: 7 },
  {
    day: 'Friday',
    focus: 'Upper Body Volume & Accessory',
    exerciseCount: 7
  }
]
[AI WORKOUT] Debug: workoutFrequency=3_4, expectedDays=5, actualDays=5
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 5
[AI WORKOUT] - Days with exercises: 5
[AI WORKOUT] - Day 1 (Chest & Triceps): 7 exercises
[AI WORKOUT] - Day 2 (Back & Biceps): 7 exercises
[AI WORKOUT] - Day 3 (Legs & Glutes): 7 exercises
[AI WORKOUT] - Day 4 (Shoulders & Abs): 7 exercises
[AI WORKOUT] - Day 5 (Upper Body Volume & Accessory): 7 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 5
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Chest & Triceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Back & Biceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs & Glutes',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Shoulders & Abs',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Upper Body Volume & Accessory',
    exerciseCount: 7,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 5
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 5
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Chest & Triceps', exerciseCount: 7 },
  { focus: 'Back & Biceps', exerciseCount: 7 },
  { focus: 'Legs & Glutes', exerciseCount: 7 },
  { focus: 'Shoulders & Abs', exerciseCount: 7 },
  { focus: 'Upper Body Volume & Accessory', exerciseCount: 7 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 5
[applyWeeklyDistribution] ğŸ” workoutFrequency: 3_4
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 5
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Chest & Triceps' },
  { day: 'Tuesday', focus: 'Back & Biceps' },
  { day: 'Wednesday', focus: 'Rest Day' },
  { day: 'Thursday', focus: 'Legs & Glutes' },
  { day: 'Friday', focus: 'Shoulders & Abs' },
  { day: 'Saturday', focus: 'Upper Body Volume & Accessory' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 5 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 5 | Rest days: 2
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 7 },
  { day: 'Wednesday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Thursday', focus: 'Legs & Glutes', exerciseCount: 7 },
  { day: 'Friday', focus: 'Shoulders & Abs', exerciseCount: 7 },
  {
    day: 'Saturday',
    focus: 'Upper Body Volume & Accessory',
    exerciseCount: 7
  },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761193253452,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":41,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"181","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":64827},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"5347","etag":"W/\"14e3-1OXdWB6OJfskCmOvL+lJldVxkIo\""}},"responseTime":26042,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User 4_5',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '4_5',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6534 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 5 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 5 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6534
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 10539
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User 4_5's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Heavy compound movement. Focus on controlled eccentric phase and a strong lockout. Ensure shoulder blades are retracted and chest is up."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Emphasize upper chest. Control the dumbbells throughout the movement, feeling the stretch at the bottom and a strong contraction at the top."
        },
        {
          "name": "Pec Deck Fly",
          "sets": 3,
          "reps": "10-15",
          "rest": "60-90s",
          "notes": "Isolation movement for chest. Focus on squeezing the pecs together at the peak contrac
[GEMINI TEXT] Workout plan generated in 44397ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User 4_5's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Heavy compound movement. Focus on controlled eccentric phase and a strong lockout. Ensure shoulder blades are retracted and chest is up."
        },
        {
          "name": "
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 10539
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User 4_5's muscle gain 5 days Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Chest & Triceps", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Heavy compound movement. Focus on controlled eccentric phase and a strong lockout. Ensure shoulder blades are retracted and chest is up." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "8-12", "rest": "90-120s", "notes": "Emphasize upper chest. Contro...
[GEMINI TEXT] Characters around position 334:  Ensure shoulder blades are re
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User 4_5's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barb...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User 4_5's muscle gain 5 days Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User 4_5's muscle gain 5 days Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 5
[WORKOUT] ğŸ” Raw plan days: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 7 },
  { day: 'Wednesday', focus: 'Legs & Glutes', exerciseCount: 7 },
  { day: 'Thursday', focus: 'Shoulders & Traps', exerciseCount: 7 },
  { day: 'Friday', focus: 'Arms & Abs', exerciseCount: 7 }
]
[AI WORKOUT] Debug: workoutFrequency=4_5, expectedDays=5, actualDays=5
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 5
[AI WORKOUT] - Days with exercises: 5
[AI WORKOUT] - Day 1 (Chest & Triceps): 7 exercises
[AI WORKOUT] - Day 2 (Back & Biceps): 7 exercises
[AI WORKOUT] - Day 3 (Legs & Glutes): 7 exercises
[AI WORKOUT] - Day 4 (Shoulders & Traps): 7 exercises
[AI WORKOUT] - Day 5 (Arms & Abs): 7 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 5
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Chest & Triceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Back & Biceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs & Glutes',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Shoulders & Traps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Arms & Abs',
    exerciseCount: 7,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 5
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 5
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Chest & Triceps', exerciseCount: 7 },
  { focus: 'Back & Biceps', exerciseCount: 7 },
  { focus: 'Legs & Glutes', exerciseCount: 7 },
  { focus: 'Shoulders & Traps', exerciseCount: 7 },
  { focus: 'Arms & Abs', exerciseCount: 7 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 5
[applyWeeklyDistribution] ğŸ” workoutFrequency: 4_5
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 5
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Chest & Triceps' },
  { day: 'Tuesday', focus: 'Back & Biceps' },
  { day: 'Wednesday', focus: 'Rest Day' },
  { day: 'Thursday', focus: 'Legs & Glutes' },
  { day: 'Friday', focus: 'Shoulders & Traps' },
  { day: 'Saturday', focus: 'Arms & Abs' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 5 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 5 | Rest days: 2
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 7 },
  { day: 'Wednesday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Thursday', focus: 'Legs & Glutes', exerciseCount: 7 },
  { day: 'Friday', focus: 'Shoulders & Traps', exerciseCount: 7 },
  { day: 'Saturday', focus: 'Arms & Abs', exerciseCount: 7 },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761193299357,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":42,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"181","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":64827},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"5356","etag":"W/\"14ec-sA3S1dqwjqigEfdTHG2imNacQRQ\""}},"responseTime":44400,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User 5_6',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '5_6',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6534 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 5 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 5 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6534
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 9832
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User 5_6's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 4,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Targets the upper chest. Maintain a slight arch in the lower back and drive through the dumbbells."
        },
        {
          "name": "Dumbbell Fly",
          "sets": 3,
          "reps": "10-12",
          "rest": "90s",
          "notes": "Isolation for chest. Focus on a deep stretch at the bottom and squeezing the pecs at the top. Keep a slight bend in the elbows."
        },
       
[GEMINI TEXT] Workout plan generated in 34652ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User 5_6's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 9832
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User 5_6's muscle gain 5 days Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Chest & Triceps", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Primary compound movement for chest. Focus on controlled eccentric and powerful concentric. Ensure full range of motion." }, { "name": "Incline Dumbbell Press", "sets": 4, "reps": "8-12", "rest": "90-120s", "notes": "Targets the upper chest. Maintain a slight ar...
[GEMINI TEXT] Characters around position 334: ncentric. Ensure full range of
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User 5_6's muscle gain 5 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Chest & Triceps",
      "exercises": [
        {
          "name": "Barb...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User 5_6's muscle gain 5 days Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User 5_6's muscle gain 5 days Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 5
[WORKOUT] ğŸ” Raw plan days: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 7 },
  { day: 'Wednesday', focus: 'Legs & Glutes', exerciseCount: 7 },
  { day: 'Thursday', focus: 'Shoulders & Traps', exerciseCount: 7 },
  { day: 'Friday', focus: 'Arms & Abs', exerciseCount: 7 }
]
[AI WORKOUT] Debug: workoutFrequency=5_6, expectedDays=5, actualDays=5
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 5
[AI WORKOUT] - Days with exercises: 5
[AI WORKOUT] - Day 1 (Chest & Triceps): 7 exercises
[AI WORKOUT] - Day 2 (Back & Biceps): 7 exercises
[AI WORKOUT] - Day 3 (Legs & Glutes): 7 exercises
[AI WORKOUT] - Day 4 (Shoulders & Traps): 7 exercises
[AI WORKOUT] - Day 5 (Arms & Abs): 7 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 5
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Chest & Triceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Back & Biceps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs & Glutes',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Shoulders & Traps',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Arms & Abs',
    exerciseCount: 7,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 5
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 5
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Chest & Triceps', exerciseCount: 7 },
  { focus: 'Back & Biceps', exerciseCount: 7 },
  { focus: 'Legs & Glutes', exerciseCount: 7 },
  { focus: 'Shoulders & Traps', exerciseCount: 7 },
  { focus: 'Arms & Abs', exerciseCount: 7 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 5
[applyWeeklyDistribution] ğŸ” workoutFrequency: 5_6
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 5
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Chest & Triceps' },
  { day: 'Tuesday', focus: 'Back & Biceps' },
  { day: 'Wednesday', focus: 'Rest Day' },
  { day: 'Thursday', focus: 'Legs & Glutes' },
  { day: 'Friday', focus: 'Shoulders & Traps' },
  { day: 'Saturday', focus: 'Arms & Abs' },
  { day: 'Sunday', focus: 'Rest Day' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 5 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 5 | Rest days: 2
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  { day: 'Monday', focus: 'Chest & Triceps', exerciseCount: 7 },
  { day: 'Tuesday', focus: 'Back & Biceps', exerciseCount: 7 },
  { day: 'Wednesday', focus: 'Rest Day', exerciseCount: 0 },
  { day: 'Thursday', focus: 'Legs & Glutes', exerciseCount: 7 },
  { day: 'Friday', focus: 'Shoulders & Traps', exerciseCount: 7 },
  { day: 'Saturday', focus: 'Arms & Abs', exerciseCount: 7 },
  { day: 'Sunday', focus: 'Rest Day', exerciseCount: 0 }
]
{"level":30,"time":1761193335516,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":43,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"181","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":64827},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"5235","etag":"W/\"1473-B+YE3eM7xmpG9lB/e+OlEzkn3to\""}},"responseTime":34655,"msg":"request completed"}
[WORKOUT] /api/generate-workout-plan called
[WORKOUT] ğŸ¯ Enhanced AI Workout Generation Starting
[WORKOUT] Profile: {
  name: 'Test User 6_7',
  level: 'intermediate',
  goal: 'muscle_gain',
  frequency: '6_7',
  age: 30,
  gender: 'M'
}
[WORKOUT] ğŸš€ Using ENHANCED AI Workout Generator
[WORKOUT] Gemini Model: gemini-2.5-flash
[WORKOUT] ğŸ“ Enhanced prompt generated (6534 chars)
[WORKOUT] Prompt preview: ğŸš¨ğŸš¨ğŸš¨ CRITICAL INSTRUCTION ğŸš¨ğŸš¨ğŸš¨
YOU MUST GENERATE EXACTLY 7 WORKOUT DAYS - NOT 3 DAYS!
YOU MUST USE THE NEW FORMAT WITH "exercises" ARRAY
DO NOT USE THE OLD FORMAT WITH warm_up/main_workout/cool_down
DO NOT GENERATE ONLY 3 DAYS - GENERATE 7 DAYS!
IF YOU GENERATE 3 DAYS, THE REQUEST WILL BE REJECT...
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] ğŸš€ DEPLOYMENT VERSION: v1.0.2 - Model fallback enabled
[GEMINI TEXT] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[GEMINI TEXT] Generating workout plan (Model: gemini-2.5-flash, attempt 1/3)
[GEMINI TEXT] User level: N/A (using prompt-based generation)
[GEMINI TEXT] Goal: N/A (using prompt-based generation)
[GEMINI TEXT] Using dedicated workout model with extended timeout (240s)
[GEMINI TEXT] Prompt length: 6534
[GEMINI TEXT] Attempt 1/2
[GEMINI TEXT] Using optimized workout model config
[GEMINI TEXT] About to call workoutModel.generateContent
[GEMINI TEXT] Model.generateContent completed successfully
[GEMINI TEXT] âœ… Success on attempt 1
[GEMINI TEXT] Response object: true
[GEMINI TEXT] Response text: true length: 12748
[GEMINI TEXT] Raw response from Gemini (first 1000 chars):
```json
{
  "plan_name": "Test User 6_7's muscle gain 7 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Compound movement for overall chest development. Focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
          "name": "Incline Dumbbell Press",
          "sets": 3,
          "reps": "8-12",
          "rest": "90-120s",
          "notes": "Targets the upper chest. Keep elbows slightly tucked to protect shoulders and maximize upper pec activation."
        },
        {
          "name": "Barbell Overhead Press",
          "sets": 3,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Primary compound for shoulder strength and mass. Engage core, press explosively overhead, avoid
[GEMINI TEXT] Workout plan generated in 57903ms
[GEMINI TEXT] Raw response preview: ```json
{
  "plan_name": "Test User 6_7's muscle gain 7 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
          "name": "Barbell Bench Press",
          "sets": 4,
          "reps": "6-10",
          "rest": "90-120s",
          "notes": "Compound movement for overall chest development. Focus on controlled eccentric and powerful concentric. Ensure full range of motion."
        },
        {
      
[GEMINI TEXT] Attempting to parse JSON for workout
[GEMINI TEXT] Raw text length: 12748
[GEMINI TEXT] Enhanced cleaned JSON preview: ```json { "plan_name": "Test User 6_7's muscle gain 7 days Plan", "weekly_schedule": [ { "day": "Monday", "focus": "Push (Chest, Shoulders, Triceps)", "exercises": [ { "name": "Barbell Bench Press", "sets": 4, "reps": "6-10", "rest": "90-120s", "notes": "Compound movement for overall chest development. Focus on controlled eccentric and powerful concentric. Ensure full range of motion." }, { "name": "Incline Dumbbell Press", "sets": 3, "reps": "8-12", "rest": "90-120s", "notes": "Targets the uppe...
[GEMINI TEXT] Characters around position 334: led eccentric and powerful con
[GEMINI TEXT] ğŸ“¦ Extracted from code block for workout: {
  "plan_name": "Test User 6_7's muscle gain 7 days Plan",
  "weekly_schedule": [
    {
      "day": "Monday",
      "focus": "Push (Chest, Shoulders, Triceps)",
      "exercises": [
        {
      ...
[GEMINI TEXT] âœ… Code block extraction successful WITHOUT cleaning for workout
[GEMINI TEXT] Successfully parsed workout data
[GEMINI TEXT] Plan name: Test User 6_7's muscle gain 7 days Plan
[GEMINI TEXT] Starting workout plan validation...
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 8,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 7,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 6,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] ğŸ” Day "undefined" validation: {
  hasExercisesArray: true,
  exercisesCount: 4,
  hasStructuredWorkout: undefined,
  warmUpCount: 0,
  mainWorkoutCount: 0,
  coolDownCount: 0
}
[GEMINI TEXT] âœ… Validated plan with name: Test User 6_7's muscle gain 7 days Plan
[WORKOUT] âœ… Raw plan received from Gemini
[WORKOUT] ğŸ” Raw plan structure - weekly_schedule length: 7
[WORKOUT] ğŸ” Raw plan days: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6
  },
  { day: 'Tuesday', focus: 'Pull (Back, Biceps)', exerciseCount: 6 },
  {
    day: 'Wednesday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  },
  {
    day: 'Thursday',
    focus: 'Upper Body (Chest, Back, Shoulders, Arms)',
    exerciseCount: 8
  },
  {
    day: 'Friday',
    focus: 'Lower Body (Legs, Glutes, Core)',
    exerciseCount: 7
  },
  {
    day: 'Saturday',
    focus: 'Full Body (Strength & Hypertrophy)',
    exerciseCount: 6
  },
  {
    day: 'Sunday',
    focus: 'Active Recovery & Mobility',
    exerciseCount: 4
  }
]
[AI WORKOUT] Debug: workoutFrequency=6_7, expectedDays=7, actualDays=7
[AI WORKOUT] ğŸ” Transformed plan structure:
[AI WORKOUT] - Total days: 7
[AI WORKOUT] - Days with exercises: 7
[AI WORKOUT] - Day 1 (Push (Chest, Shoulders, Triceps)): 6 exercises
[AI WORKOUT] - Day 2 (Pull (Back, Biceps)): 6 exercises
[AI WORKOUT] - Day 3 (Legs (Quads, Hamstrings, Glutes, Calves)): 6 exercises
[AI WORKOUT] - Day 4 (Upper Body (Chest, Back, Shoulders, Arms)): 8 exercises
[AI WORKOUT] - Day 5 (Lower Body (Legs, Glutes, Core)): 7 exercises
[AI WORKOUT] - Day 6 (Full Body (Strength & Hypertrophy)): 6 exercises
[AI WORKOUT] - Day 7 (Active Recovery & Mobility): 4 exercises
[AI WORKOUT] âœ… Final validation complete - All non-rest days have exercises
[WORKOUT] âœ… Plan transformed successfully
[WORKOUT] Training days: 7
[WORKOUT] ğŸ” Transformed plan structure: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Tuesday',
    focus: 'Pull (Back, Biceps)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Wednesday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Thursday',
    focus: 'Upper Body (Chest, Back, Shoulders, Arms)',
    exerciseCount: 8,
    hasExercises: true
  },
  {
    day: 'Friday',
    focus: 'Lower Body (Legs, Glutes, Core)',
    exerciseCount: 7,
    hasExercises: true
  },
  {
    day: 'Saturday',
    focus: 'Full Body (Strength & Hypertrophy)',
    exerciseCount: 6,
    hasExercises: true
  },
  {
    day: 'Sunday',
    focus: 'Active Recovery & Mobility',
    exerciseCount: 4,
    hasExercises: true
  }
]
[WORKOUT] ğŸ” Before applyWeeklyDistribution - workoutDays: 7
[applyWeeklyDistribution] ğŸ” Input workoutSessions length: 7
[applyWeeklyDistribution] ğŸ” Workout sessions: [
  { focus: 'Push (Chest, Shoulders, Triceps)', exerciseCount: 6 },
  { focus: 'Pull (Back, Biceps)', exerciseCount: 6 },
  {
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  },
  {
    focus: 'Upper Body (Chest, Back, Shoulders, Arms)',
    exerciseCount: 8
  },
  { focus: 'Lower Body (Legs, Glutes, Core)', exerciseCount: 7 },
  { focus: 'Full Body (Strength & Hypertrophy)', exerciseCount: 6 },
  { focus: 'Active Recovery & Mobility', exerciseCount: 4 }
]
[applyWeeklyDistribution] ğŸ” Sessions with exercises: 7
[applyWeeklyDistribution] ğŸ” workoutFrequency: 6_7
[applyWeeklyDistribution] ğŸ” boundedWorkoutDays: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule length: 7
[applyWeeklyDistribution] ğŸ” newWeeklySchedule days: [
  { day: 'Monday', focus: 'Push (Chest, Shoulders, Triceps)' },
  { day: 'Tuesday', focus: 'Pull (Back, Biceps)' },
  {
    day: 'Wednesday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)'
  },
  {
    day: 'Thursday',
    focus: 'Upper Body (Chest, Back, Shoulders, Arms)'
  },
  { day: 'Friday', focus: 'Lower Body (Legs, Glutes, Core)' },
  { day: 'Saturday', focus: 'Full Body (Strength & Hypertrophy)' },
  { day: 'Sunday', focus: 'Active Recovery & Mobility' }
]
[applyWeeklyDistribution] ğŸ” Days with exercises: 7 / 7
[WORKOUT] ğŸ” After applyWeeklyDistribution - total days: 7
[WORKOUT] ğŸ” Final distribution - Workout days: 7 | Rest days: 0
[WORKOUT] âœ… SUCCESS - Enhanced AI workout plan generated
[WORKOUT] Final schedule: 7 days
[WORKOUT] Final schedule preview: [
  {
    day: 'Monday',
    focus: 'Push (Chest, Shoulders, Triceps)',
    exerciseCount: 6
  },
  { day: 'Tuesday', focus: 'Pull (Back, Biceps)', exerciseCount: 6 },
  {
    day: 'Wednesday',
    focus: 'Legs (Quads, Hamstrings, Glutes, Calves)',
    exerciseCount: 6
  },
  {
    day: 'Thursday',
    focus: 'Upper Body (Chest, Back, Shoulders, Arms)',
    exerciseCount: 8
  },
  {
    day: 'Friday',
    focus: 'Lower Body (Legs, Glutes, Core)',
    exerciseCount: 7
  },
  {
    day: 'Saturday',
    focus: 'Full Body (Strength & Hypertrophy)',
    exerciseCount: 6
  },
  {
    day: 'Sunday',
    focus: 'Active Recovery & Mobility',
    exerciseCount: 4
  }
]
{"level":30,"time":1761193394928,"pid":71352,"hostname":"MacBook-Air-126.local","req":{"id":44,"method":"POST","url":"/api/generate-workout-plan","query":{},"params":{},"headers":{"content-type":"application/json","content-length":"181","host":"localhost:4000","connection":"keep-alive"},"remoteAddress":"127.0.0.1","remotePort":64827},"res":{"statusCode":200,"headers":{"cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"same-origin","origin-agent-cluster":"?1","referrer-policy":"no-referrer","strict-transport-security":"max-age=15552000; includeSubDomains","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"SAMEORIGIN","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","access-control-allow-origin":"*","access-control-allow-credentials":"true","access-control-expose-headers":"Content-Length,Content-Type","content-type":"application/json; charset=utf-8","content-length":"6649","etag":"W/\"19f9-W8mq7xb/si19OS124IOW0QlMe4Q\""}},"responseTime":57907,"msg":"request completed"}
[SHUTDOWN] Received SIGTERM. Shutting down gracefully...
